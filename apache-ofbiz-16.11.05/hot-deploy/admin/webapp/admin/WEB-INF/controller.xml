<?xml version="1.0" encoding="UTF-8"?>
<site-conf xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		   xmlns="http://ofbiz.apache.org/Site-Conf" xsi:schemaLocation="http://ofbiz.apache.org/Site-Conf http://ofbiz.apache.org/dtds/site-conf.xsd">

	<include location="component://common/webcommon/WEB-INF/common-controller.xml" />
	<include location="component://commonext/webapp/WEB-INF/controller.xml" />
	<include location="component://content/webapp/content/WEB-INF/controller.xml" />

	<handler name="java" type="request"
		class="org.apache.ofbiz.webapp.event.JavaEventHandler" />
	<handler name="service" type="request"
		class="org.apache.ofbiz.webapp.event.ServiceEventHandler" />
	<handler name="service-multi" type="request"
		class="org.apache.ofbiz.webapp.event.ServiceMultiEventHandler" />
	<handler name="simple" type="request"
		class="org.apache.ofbiz.webapp.event.SimpleEventHandler" />

	<handler name="jsp" type="view" class="org.apache.ofbiz.webapp.view.JspViewHandler" />
	<handler name="http" type="view"
		class="org.apache.ofbiz.webapp.view.HttpViewHandler" />
	<handler name="screen" type="view"
	    class="org.apache.ofbiz.widget.renderer.macro.MacroScreenViewHandler"/>
	<handler name="simplecontent" type="view"
		class="org.apache.ofbiz.content.view.SimpleContentViewHandler" />
	<handler name="screenfop" type="view"
		class="org.apache.ofbiz.widget.renderer.fo.ScreenFopViewHandler" />

	<!-- Request Mappings -->
	<!-- default request; call into CMS -->
	<default-request request-uri="home" />

	<!-- Security Request Mappings -->
	<request-map uri="login">
		<security https="true" auth="false" />
		<event type="java" path="org.apache.ofbiz.webapp.control.LoginWorker"
			invoke="login" />
		<response name="success" type="request-redirect" value="home" />
		<response name="requirePasswordChange" type="view"
			value="requirePasswordChange" />
		<response name="error" type="view" value="login" />
	</request-map>
	<request-map uri="logout">
		<security https="true" auth="true" />
		<event type="java" path="org.apache.ofbiz.webapp.control.LoginWorker"
			invoke="logout" />
		<response name="success" type="request-redirect" value="home" />
		<response name="error" type="view" value="home" />
	</request-map>
	<request-map uri="autoLogout">
		<security https="true" auth="false" />
		<event type="java" path="org.apache.ofbiz.webapp.control.LoginWorker"
			invoke="autoLoginRemove" />
		<response name="success" type="request-redirect" value="home" />
		<response name="error" type="view" value="home" />
	</request-map>
	
	<!-- End of Security Mappings -->

	<request-map uri="home">
		<security https="true" auth="true" />
		<response name="success" type="view" value="home" />
	</request-map>
	<request-map uri="customers">
		<security https="true" auth="true" />
		<response name="success" type="view" value="customers" />
	</request-map>
	<request-map uri="new_customer">
		<security https="true" auth="true" />
		<response name="success" type="view" value="new_customer" />
	</request-map>
	<request-map uri="new_admin_user">
		<security https="true" auth="true" />
		<response name="success" type="view" value="new_admin_user" />
	</request-map>
	<request-map uri="CreateCustomer">
		<security https="true" auth="true" />
		<event type="java" path="com.autopatt.admin.events.CustomerEvents"
			   invoke="createCustomer" />
		<response name="success" type="view" value="customers" />
		<response name="error" type="view" value="new_customer" />
	</request-map>
	<request-map uri="CreateAdmin">
		<security https="true" auth="true" />
		<event type="java" path="com.autopatt.admin.events.AdminMgmtEvents"
			   invoke="createAdminUser" />
		<response name="success" type="request-redirect" value="manage_users" >
			<redirect-parameter name="createSuccess"/>
		</response>
		<response name="error" type="view" value="new_admin_user" />
	</request-map>
	<request-map uri="manage_customer">
		<security https="true" auth="true" />
		<response name="success" type="view" value="manage_customer" />
	</request-map>
	<request-map uri="org_employees">
		<security https="true" auth="true"/>
		<response name="success" type="view" value="org_employees"/>
	</request-map>

	<request-map uri="org_employee_details">
		<security https="true" auth="true" />
		<response name="success" type="view" value="org_employee_details" />
	</request-map>

	<request-map uri="myaccount">
		<security https="true" auth="true" />
		<response name="success" type="view" value="myaccount" />
	</request-map>
	<request-map uri="UpdateMyProfile">
	<event type="java" path="com.autopatt.admin.events.MyProfileEvents" invoke="updateMyProfile" />
	<response name="success" type="request-redirect" value="myaccount" />
	<response name="error" type="request-redirect" value="myaccount" />
	</request-map>
	<request-map uri="updateEmployee">
		<event type="java" path="com.autopatt.admin.events.EmployeeEvents" invoke="updateEmployee" />
		<response name="success" type="request-redirect" value="manage_customer" >
			<redirect-parameter name="orgPartyId"/>
		</response>
		<response name="error" type="view" value="manage_customer" />
	</request-map>

	<request-map uri="UpdateCustomerDetails">
		<event type="java" path="com.autopatt.admin.events.CustomerEvents" invoke="UpdateCustomerDetails" />
		<response name="success" type="request-redirect" value="manage_customer" >
			<redirect-parameter name="orgPartyId"/>
		</response>
		<response name="error" type="view" value="manage_customer" />
	</request-map>

	<request-map uri="changePassword">
		<security https="true" auth="true" />
		<response name="success" type="view" value="changePassword" />
	</request-map>
	<request-map uri="updatePassword">
		<security https="true" auth="true" />
		<event type="java" path="com.autopatt.admin.events.MyProfileEvents" invoke="updatePassword" />
		<response name="success" type="view" value="home" />
		<response name="error" type="view" value="changePassword" />
	</request-map>

	<request-map uri="manage_users">
		<security https="true" auth="true" />
		<response name="success" type="view" value="manage_users" />
	</request-map>

	<request-map uri="manage_plans">
		<security https="true" auth="true"/>
		<response name="success" type="view" value="manage_plans"/>
	</request-map>
	<request-map uri="reports">
		<security https="true" auth="true"/>
		<response name="success" type="view" value="reports"/>
	</request-map>
	<request-map uri="filter_subscriptions">
		<security https="true" auth="true"/>
		<response name="success" type="view" value="customer_subscription"/>
	</request-map>
	<request-map uri="createSubscription">
		<event type="java" path="com.autopatt.admin.events.SubscriptionEvents" invoke="createSubscription" />
		<response name="success" type="request" value="json"/>
		<response name="error" type="request" value="json"/>
	</request-map>
	<request-map uri="revokeSubscription">
		<event type="java" path="com.autopatt.admin.events.SubscriptionEvents" invoke="revokeSubscription" />
		<response name="success" type="request" value="json"/>
		<response name="error" type="request" value="json"/>
	</request-map>
	<request-map uri="renewSubscription">
		<event type="java" path="com.autopatt.admin.events.SubscriptionEvents" invoke="renewSubscription" />
		<response name="success" type="request" value="json"/>
		<response name="error" type="request" value="json"/>
	</request-map>
	<request-map uri="edit_plan">
		<security https="true" auth="true"/>
		<response name="success" type="view" value="edit_plan"/>
	</request-map>
	<request-map uri="edit_admin_user">
		<security https="true" auth="true"/>
		<response name="success" type="view" value="edit_admin_user"/>
	</request-map>
	<request-map uri="UpdatePlan">
		<event type="java" path="com.autopatt.admin.events.PlanMgmtEvents" invoke="updatePlan" />
		<response type="request-redirect" name="success" value="manage_plans">
			<redirect-parameter name="updateSuccess"/>
		</response>
		<response type="view" name="error" value="edit_plan"/>
	</request-map>
	<request-map uri="UpdateAdminUser">
		<security https="true" auth="true" />
		<event type="java" path="com.autopatt.admin.events.AdminMgmtEvents" invoke="updateAdminUser" />
		<response name="success" type="request-redirect" value="manage_users" />
		<response name="error" type="view" value="edit_admin_user" />
	</request-map>
	<request-map uri="DeleteAdminUser">
		<security https="true" auth="true" />
		<event type="java" path="com.autopatt.admin.events.AdminMgmtEvents" invoke="deleteAdminUser" />
		<response name="success" type="request" value="json"/>
		<response name="error" type="request" value="json"/>
	</request-map>

	<request-map uri="ajaxSuspendOrgUser">
		<security https="true" auth="true"/>
		<event type="java" path="com.autopatt.admin.events.EmployeeEvents" invoke="suspendEmployee" />
		<response name="success" type="request" value="json"/>
		<response name="error" type="request" value="json"/>
	</request-map>
	<request-map uri="ajaxActivateOrgUser">
		<security https="true" auth="true"/>
		<event type="java" path="com.autopatt.admin.events.EmployeeEvents" invoke="activateEmployee" />
		<response name="success" type="request" value="json"/>
		<response name="error" type="request" value="json"/>
	</request-map>
	<request-map uri="ajaxDeleteOrgUser">
		<security https="true" auth="true"/>
		<event type="java" path="com.autopatt.admin.events.EmployeeEvents" invoke="ajaxDeleteOrgUser" />
		<response name="success" type="request" value="json"/>
		<response name="error" type="request" value="json"/>
	</request-map>

	<request-map uri="system_settings">
		<security https="true" auth="true"/>
		<response name="success" type="view" value="system_settings"/>
	</request-map>

	<!-- View Mappings - START -->
	<view-map name="home" type="screen"
		page="component://admin/widget/AdminScreens.xml#home" />

	<view-map name="customers" type="screen"
			  page="component://admin/widget/AdminCustomerScreens.xml#customers" />
	<view-map name="new_customer" type="screen"
			  page="component://admin/widget/AdminCustomerScreens.xml#new_customer" />
	<view-map name="new_admin_user" type="screen"
			  page="component://admin/widget/AdminCustomerScreens.xml#new_admin_user" />
	<view-map name="manage_customer" type="screen"
			  page="component://admin/widget/AdminCustomerScreens.xml#manage_customer" />
	<view-map name="org_employee_details" type="screen"
			  page="component://admin/widget/AdminCustomerScreens.xml#org_employee_details" />


	<view-map name="manage_users" type="screen"
			  page="component://admin/widget/AdminScreens.xml#manage_users" />

	<view-map name="login" type="screen"
			  page="component://admin/widget/AdminScreens.xml#login" />
	<view-map name="requireChangePassword" type="screen"
			  page="component://admin/widget/AdminScreens.xml#requireChangePassword" />
	<view-map name="myaccount" type="screen"
			  page="component://admin/widget/AdminScreens.xml#myaccount" />
	<view-map name="changePassword" type="screen"
			  page="component://admin/widget/AdminScreens.xml#changePassword" />
	<view-map name="manage_plans" type="screen"
			  page="component://admin/widget/AdminScreens.xml#manage_plans" />
	<view-map name="reports" type="screen"
			  page="component://admin/widget/AdminScreens.xml#reports" />
	<view-map name="customer_subscription" type="screen"
			  page="component://admin/widget/AdminCustomerScreens.xml#customer_subscriptions_tab" />
	<view-map name="org_employees" type="screen"
			  page="component://admin/widget/AdminCustomerScreens.xml#customer_employees_tab" />

	<view-map name="edit_plan" type="screen"
			  page="component://admin/widget/AdminScreens.xml#edit_plan" />

	<view-map name="edit_admin_user" type="screen"
			  page="component://admin/widget/AdminScreens.xml#edit_admin_user" />

	<view-map name="system_settings" type="screen"
			  page="component://admin/widget/AdminScreens.xml#system_settings" />

	<view-map name="requirePasswordChange" type="screen"
			  page="component://admin/widget/AdminScreens.xml#requireChangePassword"/>
</site-conf>
