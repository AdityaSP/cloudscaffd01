<?xml version="1.0" encoding="UTF-8"?>
<entitymodel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/entitymodel.xsd">
    <!-- ========================================================= -->
    <!-- ======================== Defaults ======================= -->
    <!-- ========================================================= -->
    <title>Entity of Portal Component</title>
    <description>None</description>
    <copyright></copyright>
    <version></version>

    <!--  Entity to manage user login info to ensure One-Device only login -->
    <entity entity-name="UserLoginSessionInfo" package-name="com.autopatt.portal" title="User Login Session Info">
        <field name="userLoginId" type="id-vlong"/>
        <field name="sessionId" type="id-vlong"/>
        <prim-key field="userLoginId"/>
    </entity>

    <!-- TenantOrgParty association entity -->
    <entity entity-name="TenantOrgParty" package-name="org.apache.ofbiz.tenant">
        <field name="tenantId" type="id-ne"/>
        <field name="orgPartyId" type="id-vlong-ne"/>
        <prim-key field="tenantId"/>
        <prim-key field="orgPartyId"/>
        <relation type="one" fk-name="FK_TNT_ORG_PRTY" rel-entity-name="Tenant">
            <key-map field-name="tenantId"/>
        </relation>
    </entity>

    <view-entity entity-name="PartyRelationshipCount"
                 package-name="org.apache.ofbiz.party"
                 title="View entity to get party relationship counts">
        <member-entity entity-alias="PR" entity-name="PartyRelationship"/>
        <alias entity-alias="PR" name="partyIdTo" function="count"/>
        <alias entity-alias="PR" name="partyIdFrom" group-by="true"/>
        <alias entity-alias="PR" name="partyRelationshipTypeId" group-by="true"/>
        <alias entity-alias="PR" name="roleTypeIdFrom" />
        <alias entity-alias="PR" name="roleTypeIdTo" />
        <alias entity-alias="PR" name="fromDate" />
        <alias entity-alias="PR" name="thruDate" />
    </view-entity>

</entitymodel>