function Sidebar(editorUi,container){this.editorUi=editorUi,this.container=container,this.palettes=new Object,this.taglist=new Object,this.showTooltips=!0,this.graph=editorUi.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet()),this.graph.cellRenderer.minSvgStrokeWidth=this.minThumbStrokeWidth,this.graph.cellRenderer.antiAlias=this.thumbAntiAlias,this.graph.container.style.visibility="hidden",this.graph.foldingEnabled=!1,document.body.appendChild(this.graph.container),this.pointerUpHandler=mxUtils.bind(this,(function(){this.showTooltips=!0})),mxEvent.addListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerDownHandler=mxUtils.bind(this,(function(){this.showTooltips=!1,this.hideTooltip()})),mxEvent.addListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerMoveHandler=mxUtils.bind(this,(function(evt){for(var src=mxEvent.getSource(evt);null!=src;){if(src==this.currentElt)return;src=src.parentNode}this.hideTooltip()})),mxEvent.addListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerOutHandler=mxUtils.bind(this,(function(evt){null==evt.toElement&&null==evt.relatedTarget&&this.hideTooltip()})),mxEvent.addListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),mxEvent.addListener(container,"scroll",mxUtils.bind(this,(function(){this.showTooltips=!0,this.hideTooltip()}))),this.init()}Sidebar.prototype.init=function(){var dir=STENCIL_PATH;this.addSearchPalette(!0),this.addGeneralPalette(!0),this.addMiscPalette(!1),this.addAdvancedPalette(!1),this.addBasicPalette(dir),this.addStencilPalette("arrows",mxResources.get("arrows"),dir+"/arrows.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.addUmlPalette(!1),this.addBpmnPalette(dir,!1),this.addStencilPalette("flowchart","Flowchart",dir+"/flowchart.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.addImagePalette("clipart",mxResources.get("clipart"),dir+"/clipart/","_128x128.png",["Earth_globe","Empty_Folder","Full_Folder","Gear","Lock","Software","Virus","Email","Database","Router_Icon","iPad","iMac","Laptop","MacBook","Monitor_Tower","Printer","Server_Tower","Workstation","Firewall_02","Wireless_Router_N","Credit_Card","Piggy_Bank","Graph","Safe","Shopping_Cart","Suit1","Suit2","Suit3","Pilot1","Worker1","Soldier1","Doctor1","Tech1","Security1","Telesales1"],null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"})},Sidebar.prototype.collapsedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNUQyRTJFNjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNUQyRTJFNzZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MEUxNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MEUyNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhSMj6lrwAjcC1GyahV+dcZJgeIIFgA7":IMAGE_PATH+"/collapsed.gif",Sidebar.prototype.expandedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxREY3NzBERjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxREY3NzBFMDZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MERENkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MERFNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/expanded.gif",Sidebar.prototype.searchImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAEaSURBVHjabNGxS5VxFIfxz71XaWuQUJCG/gCHhgTD9VpEETg4aMOlQRp0EoezObgcd220KQiXmpretTAHQRBdojlQEJyukPdt+b1ywfvAGc7wnHP4nlZd1yKijQW8xzNc4Su+ZOYfQ3T6/f4YNvEJYzjELXp4VVXVz263+7cR2niBxAFeZ2YPi3iHR/gYERPDwhpOsd6sz8x/mfkNG3iOlWFhFj8y89J9KvzGXER0GuEaD42mgwHqUtoljbcRsTBCeINpfM/MgZLKPpaxFxGbOCqDXmILN7hoJrTKH+axhxmcYRxP0MIDnOBDZv5q1XUNIuJxifJp+UNV7t7BFM6xeic0RMQ4Bpl5W/ol7GISx/eEUUTECrbx+f8A8xhiZht9zsgAAAAASUVORK5CYII=":IMAGE_PATH+"/search.png",Sidebar.prototype.dragPreviewBorder="1px dashed black",Sidebar.prototype.enableTooltips=!0,Sidebar.prototype.tooltipBorder=16,Sidebar.prototype.tooltipDelay=300,Sidebar.prototype.dropTargetDelay=200,Sidebar.prototype.gearImage=STENCIL_PATH+"/clipart/Gear_128x128.png",Sidebar.prototype.thumbWidth=42,Sidebar.prototype.thumbHeight=42,Sidebar.prototype.minThumbStrokeWidth=1,Sidebar.prototype.thumbAntiAlias=!1,Sidebar.prototype.thumbPadding=document.documentMode>=5?2:3,Sidebar.prototype.thumbBorder=2,"large"!=urlParams["sidebar-entries"]&&(Sidebar.prototype.thumbPadding=document.documentMode>=5?0:1,Sidebar.prototype.thumbBorder=1,Sidebar.prototype.thumbWidth=32,Sidebar.prototype.thumbHeight=30,Sidebar.prototype.minThumbStrokeWidth=1.3,Sidebar.prototype.thumbAntiAlias=!0),Sidebar.prototype.sidebarTitleSize=9,Sidebar.prototype.sidebarTitles=!1,Sidebar.prototype.tooltipTitles=!0,Sidebar.prototype.maxTooltipWidth=400,Sidebar.prototype.maxTooltipHeight=400,Sidebar.prototype.addStencilsToIndex=!0,Sidebar.prototype.defaultImageWidth=80,Sidebar.prototype.defaultImageHeight=80,Sidebar.prototype.getTooltipOffset=function(){return new mxPoint(0,0)},Sidebar.prototype.showTooltip=function(elt,cells,w,h,title,showLabel){if(this.enableTooltips&&this.showTooltips&&this.currentElt!=elt){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null);var show=mxUtils.bind(this,(function(){null==this.tooltip&&(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.zIndex=mxPopupMenu.prototype.zIndex-1,document.body.appendChild(this.tooltip),this.graph2=new Graph(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setEnabled(!1),mxClient.IS_SVG||(this.graph2.view.canvas.style.position="relative")),this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),w>this.maxTooltipWidth||h>this.maxTooltipHeight?this.graph2.view.scale=Math.round(100*Math.min(this.maxTooltipWidth/w,this.maxTooltipHeight/h))/100:this.graph2.view.scale=1,this.tooltip.style.display="block",this.graph2.labelsVisible=null==showLabel||showLabel;var fo=mxClient.NO_FO;mxClient.NO_FO=Editor.prototype.originalNoForeignObject,this.graph2.addCells(cells),mxClient.NO_FO=fo;var bounds=this.graph2.getGraphBounds(),width=bounds.width+2*this.tooltipBorder+4,height=bounds.height+2*this.tooltipBorder;mxClient.IS_QUIRKS?(height+=4,this.tooltip.style.overflow="hidden"):this.tooltip.style.overflow="visible",this.tooltip.style.width=width+"px";var w2=width;if(this.tooltipTitles&&null!=title&&title.length>0){null==this.tooltipTitle?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerHTML="",this.tooltipTitle.style.display="",mxUtils.write(this.tooltipTitle,title),w2=Math.min(this.maxTooltipWidth,Math.max(width,this.tooltipTitle.scrollWidth+4));var ddy=this.tooltipTitle.offsetHeight+10;height+=ddy,mxClient.IS_SVG?this.tooltipTitle.style.marginTop=2-ddy+"px":(height-=6,this.tooltipTitle.style.top=height-ddy+"px")}else null!=this.tooltipTitle&&null!=this.tooltipTitle.parentNode&&(this.tooltipTitle.style.display="none");w2>width&&(this.tooltip.style.width=w2+"px"),this.tooltip.style.height=height+"px";var x0=-Math.round(bounds.x-this.tooltipBorder)+(w2-width)/2,y0=-Math.round(bounds.y-this.tooltipBorder),b=document.body,d=document.documentElement,off=this.getTooltipOffset(),bottom=Math.max(b.clientHeight||0,d.clientHeight),left=this.container.clientWidth+this.editorUi.splitSize+3+this.editorUi.container.offsetLeft+off.x,top=Math.min(bottom-height-20,Math.max(0,this.editorUi.container.offsetTop+this.container.offsetTop+elt.offsetTop-this.container.scrollTop-height/2+16))+off.y;mxClient.IS_SVG?0!=x0||0!=y0?this.graph2.view.canvas.setAttribute("transform","translate("+x0+","+y0+")"):this.graph2.view.canvas.removeAttribute("transform"):(this.graph2.view.drawPane.style.left=x0+"px",this.graph2.view.drawPane.style.top=y0+"px"),this.tooltip.style.position="absolute",this.tooltip.style.left=left+"px",this.tooltip.style.top=top+"px"}));null!=this.tooltip&&"none"!=this.tooltip.style.display?show():this.thread=window.setTimeout(show,this.tooltipDelay),this.currentElt=elt}},Sidebar.prototype.hideTooltip=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),null!=this.tooltip&&(this.tooltip.style.display="none",this.currentElt=null)},Sidebar.prototype.addDataEntry=function(tags,width,height,title,data){return this.addEntry(tags,mxUtils.bind(this,(function(){return this.createVertexTemplateFromData(data,width,height,title)})))},Sidebar.prototype.addEntries=function(images){for(var i=0;i<images.length;i++)mxUtils.bind(this,(function(img){var data=img.data;null!=data&&null!=img.title?this.addEntry(img.title,mxUtils.bind(this,(function(){data=this.editorUi.convertDataUri(data);var s="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return"fixed"==img.aspect&&(s+="aspect=fixed;"),this.createVertexTemplate(s+"image="+data,img.w,img.h,"",img.title||"",!1,!1,!0)}))):null!=img.xml&&null!=img.title&&this.addEntry(img.title,mxUtils.bind(this,(function(){var cells=this.editorUi.stringToCells(Graph.decompress(img.xml));return this.createVertexTemplateFromCells(cells,img.w,img.h,img.title||"",!0,!1,!0)})))}))(images[i])},Sidebar.prototype.addEntry=function(tags,fn){if(null!=this.taglist&&null!=tags&&tags.length>0)for(var tmp=tags.toLowerCase().replace(/[\/\,\(\)]/g," ").split(" "),doAddEntry=mxUtils.bind(this,(function(tag){if(null!=tag&&tag.length>1){var entry=this.taglist[tag];"object"!=typeof entry&&(entry={entries:[],dict:new mxDictionary},this.taglist[tag]=entry),null==entry.dict.get(fn)&&(entry.dict.put(fn,fn),entry.entries.push(fn))}})),i=0;i<tmp.length;i++){doAddEntry(tmp[i]);var normalized=tmp[i].replace(/\.*\d*$/,"");normalized!=tmp[i]&&doAddEntry(normalized)}return fn},Sidebar.prototype.searchEntries=function(searchTerms,count,page,success,error){if(null!=this.taglist&&null!=searchTerms){for(var tmp=searchTerms.toLowerCase().split(" "),dict=new mxDictionary,max=(page+1)*count,results=[],index=0,i=0;i<tmp.length;i++)if(tmp[i].length>0){var entry=this.taglist[tmp[i]],tmpDict=new mxDictionary;if(null!=entry){var arr=entry.entries;results=[];for(var j=0;j<arr.length;j++){var entry=arr[j];if(0==index==(null==dict.get(entry))&&(tmpDict.put(entry,entry),results.push(entry),i==tmp.length-1&&results.length==max))return void success(results.slice(page*count,max),max,!0,tmp)}}else results=[];dict=tmpDict,index++}var len=results.length;success(results.slice(page*count,(page+1)*count),len,!1,tmp)}else success([],null,null,tmp)},Sidebar.prototype.filterTags=function(tags){if(null!=tags){for(var arr=tags.split(" "),result=[],hash={},i=0;i<arr.length;i++)null==hash[arr[i]]&&(hash[arr[i]]="1",result.push(arr[i]));return result.join(" ")}return null},Sidebar.prototype.cloneCell=function(cell,value){var clone=cell.clone();return null!=value&&(clone.value=value),clone},Sidebar.prototype.addSearchPalette=function(expand){var elt=document.createElement("div");elt.style.visibility="hidden",this.container.appendChild(elt);var div=document.createElement("div");div.className="geSidebar",div.style.boxSizing="border-box",div.style.overflow="hidden",div.style.width="100%",div.style.padding="8px",div.style.paddingTop="14px",div.style.paddingBottom="0px",expand||(div.style.display="none");var inner=document.createElement("div");inner.style.whiteSpace="nowrap",inner.style.textOverflow="clip",inner.style.paddingBottom="8px",inner.style.cursor="default";var input=document.createElement("input");input.setAttribute("placeholder",mxResources.get("searchShapes")),input.setAttribute("type","text"),input.style.fontSize="12px",input.style.overflow="hidden",input.style.boxSizing="border-box",input.style.border="solid 1px #d5d5d5",input.style.borderRadius="4px",input.style.width="100%",input.style.outline="none",input.style.padding="6px",input.style.paddingRight="20px",inner.appendChild(input);var cross=document.createElement("img"),find;cross.setAttribute("src",Sidebar.prototype.searchImage),cross.setAttribute("title",mxResources.get("search")),cross.style.position="relative",cross.style.left="-18px",mxClient.IS_QUIRKS?(input.style.height="28px",cross.style.top="-4px"):cross.style.top="1px",cross.style.background="url('"+this.editorUi.editor.transparentImage+"')",inner.appendChild(cross),div.appendChild(inner);var center=document.createElement("center"),button=mxUtils.button(mxResources.get("moreResults"),(function(){find()}));button.style.display="none",button.style.lineHeight="normal",button.style.marginTop="4px",button.style.marginBottom="8px",center.style.paddingTop="4px",center.style.paddingBottom="4px",center.appendChild(button),div.appendChild(center);var searchTerm="",active=!1,complete=!1,page=0,hash=new Object,count=12,clearDiv=mxUtils.bind(this,(function(){active=!1,this.currentSearch=null;for(var child=div.firstChild;null!=child;){var next=child.nextSibling;child!=inner&&child!=center&&child.parentNode.removeChild(child),child=next}}));mxEvent.addListener(cross,"click",(function(){cross.getAttribute("src")==Dialog.prototype.closeImage&&(cross.setAttribute("src",Sidebar.prototype.searchImage),cross.setAttribute("title",mxResources.get("search")),button.style.display="none",input.value="",searchTerm="",clearDiv()),input.focus()})),find=mxUtils.bind(this,(function(){if(count=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10))),this.hideTooltip(),""!=input.value){if(null!=center.parentNode&&(searchTerm!=input.value&&(clearDiv(),searchTerm=input.value,hash=new Object,complete=!1,page=0),!active&&!complete)){button.setAttribute("disabled","true"),button.style.display="",button.style.cursor="wait",button.innerHTML=mxResources.get("loading")+"...",active=!0;var current=new Object;this.currentSearch=current,this.searchEntries(searchTerm,count,page,mxUtils.bind(this,(function(results,len,more,terms){if(this.currentSearch==current){results=null!=results?results:[],active=!1,page++,this.insertSearchHint(div,searchTerm,count,page,results,len,more,terms),0==results.length&&1==page&&(searchTerm=""),null!=center.parentNode&&center.parentNode.removeChild(center);for(var i=0;i<results.length;i++)try{var elt=results[i]();null==hash[elt.innerHTML]&&(hash[elt.innerHTML]="1",div.appendChild(elt))}catch(e){}more?(button.removeAttribute("disabled"),button.innerHTML=mxResources.get("moreResults")):(button.innerHTML=mxResources.get("reset"),button.style.display="none",complete=!0),button.style.cursor="",div.appendChild(center)}})),mxUtils.bind(this,(function(){button.style.cursor=""})))}}else clearDiv(),input.value="",searchTerm="",hash=new Object,button.style.display="none",complete=!1,input.focus()})),mxEvent.addListener(input,"keydown",mxUtils.bind(this,(function(evt){13==evt.keyCode&&(find(),mxEvent.consume(evt))}))),mxEvent.addListener(input,"keyup",mxUtils.bind(this,(function(evt){""==input.value?(cross.setAttribute("src",Sidebar.prototype.searchImage),cross.setAttribute("title",mxResources.get("search"))):(cross.setAttribute("src",Dialog.prototype.closeImage),cross.setAttribute("title",mxResources.get("reset"))),""==input.value?(complete=!0,button.style.display="none"):input.value!=searchTerm?(button.style.display="none",complete=!1):active||(button.style.display=complete?"none":"")}))),mxEvent.addListener(input,"mousedown",(function(evt){evt.stopPropagation&&evt.stopPropagation(),evt.cancelBubble=!0})),mxEvent.addListener(input,"selectstart",(function(evt){evt.stopPropagation&&evt.stopPropagation(),evt.cancelBubble=!0}));var outer=document.createElement("div");outer.appendChild(div),this.container.appendChild(outer),this.palettes.search=[elt,outer]},Sidebar.prototype.insertSearchHint=function(div,searchTerm,count,page,results,len,more,terms){if(0==results.length&&1==page){var err=document.createElement("div");err.className="geTitle",err.style.cssText="background-color:transparent;border-color:transparent;color:gray;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important",mxUtils.write(err,mxResources.get("noResultsFor",[searchTerm])),div.appendChild(err)}},Sidebar.prototype.addGeneralPalette=function(expand){var lineTags="line lines connector connectors connection connections arrow arrows ",fns=[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",40,20,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;",190,120,"<h1>Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>","Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;",100,80,"","Data Storage"),this.addEntry("curve",mxUtils.bind(this,(function(){var cell=new mxCell("",new mxGeometry(0,0,50,50),"curved=1;endArrow=classic;html=1;");return cell.geometry.setTerminalPoint(new mxPoint(0,50),!0),cell.geometry.setTerminalPoint(new mxPoint(50,0),!1),cell.geometry.points=[new mxPoint(50,50),new mxPoint(0,0)],cell.geometry.relative=!0,cell.edge=!0,this.createEdgeTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Curve")}))),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Arrow",null,lineTags+"bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,lineTags+"directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",50,50,"","Link",null,lineTags+"link"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,lineTags+"dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,lineTags+"simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,lineTags+"bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,lineTags+"directional directed")];this.addPaletteFunctions("general",mxResources.get("general"),null==expand||expand,fns)},Sidebar.prototype.addBasicPalette=function(dir){this.addStencilPalette("basic",mxResources.get("basic"),dir+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")])},Sidebar.prototype.addMiscPalette=function(expand){var sb=this,lineTags="line lines connector connectors connection connections arrow arrows ",fns=[this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=#ffffff;overflow=fill;rounded=0;",280,160,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr style="background-color:#A7C942;color:#ffffff;border:1px solid #98bf21;"><th align="left">Title 1</th><th align="left">Title 2</th><th align="left">Title 3</th></tr><tr style="border:1px solid #98bf21;"><td>Value 1</td><td>Value 2</td><td>Value 3</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 4</td><td>Value 5</td><td>Value 6</td></tr><tr style="border:1px solid #98bf21;"><td>Value 7</td><td>Value 8</td><td>Value 9</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 10</td><td>Value 11</td><td>Value 12</td></tr></table>',"Table 1"),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=none;overflow=fill;",180,140,'<table border="0" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"Table 2"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",180,140,'<table border="1" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"Table 3"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",160,140,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1\nSection 1.2\nSection 1.3</td></tr><tr><td align="center">Section 2.1\nSection 2.2\nSection 2.3</td></tr></table>',"Table 4"),this.addEntry("link hyperlink",mxUtils.bind(this,(function(){var cell=new mxCell("Link",new mxGeometry(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return cell.vertex=!0,this.graph.setLinkForCell(cell,"https://www.draw.io"),this.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Link")}))),this.addEntry("timestamp date time text label",mxUtils.bind(this,(function(){var cell=new mxCell("%date{ddd mmm dd yyyy HH:MM:ss}%",new mxGeometry(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return cell.vertex=!0,this.graph.setAttributeForCell(cell,"placeholders","1"),this.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Timestamp")}))),this.addEntry("variable placeholder metadata hello world text label",mxUtils.bind(this,(function(){var cell=new mxCell("%name% Text",new mxGeometry(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return cell.vertex=!0,this.graph.setAttributeForCell(cell,"placeholders","1"),this.graph.setAttributeForCell(cell,"name","Variable"),this.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Variable")}))),this.createVertexTemplateEntry("shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;",120,80,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,80,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",100,60,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle"),this.createEdgeTemplateEntry("rounded=0;comic=1;strokeWidth=2;endArrow=blockThin;html=1;fontFamily=Comic Sans MS;fontStyle=1;",50,50,"","Comic Arrow"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;comic=1;strokeWidth=2;fontFamily=Comic Sans MS;fontStyle=1;",120,60,"RECTANGLE","Comic Rectangle",!0,null,"comic rectangle rect box text retro"),this.createVertexTemplateEntry("rhombus;html=1;align=center;whiteSpace=wrap;comic=1;strokeWidth=2;fontFamily=Comic Sans MS;fontStyle=1;",100,100,"DIAMOND","Comic Diamond",!0,null,"comic diamond rhombus if condition decision conditional question test retro"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",!0,null,"rectangle rect box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoCube;backgroundOutline=1;",90,100,"","Isometric Cube",!0,null,"cube box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;",20,120,"","Curly Bracket"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;",120,20,"","Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=1;aspect=fixed;image="+this.gearImage,52,61,"","Image (Fixed Aspect)",!1,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=0;image="+this.gearImage,50,60,"","Image (Variable Aspect)",!1,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+this.gearImage,60,60,"Icon","Icon",!1,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+this.gearImage,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+this.gearImage,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.addEntry("shape group container",(function(){var cell=new mxCell("Label",new mxGeometry(0,0,160,70),"html=1;whiteSpace=wrap;container=1;recursiveResize=0;collapsible=0;");cell.vertex=!0;var symbol=new mxCell("",new mxGeometry(20,20,20,30),"triangle;html=1;whiteSpace=wrap;");return symbol.vertex=!0,cell.insert(symbol),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Shape Group")})),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;left=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;",50,50,"","Manual Line",null,lineTags+"manual"),this.createEdgeTemplateEntry("shape=filledEdge;rounded=0;fixDash=1;endArrow=none;strokeWidth=10;fillColor=#ffffff;edgeStyle=orthogonalEdgeStyle;",60,40,"","Filled Edge"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;",50,50,"","Horizontal Elbow",null,lineTags+"elbow horizontal"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;",50,50,"","Vertical Elbow",null,lineTags+"elbow vertical")];this.addPaletteFunctions("misc",mxResources.get("misc"),null==expand||expand,fns)},Sidebar.prototype.addAdvancedPalette=function(expand){this.addPaletteFunctions("advanced",mxResources.get("advanced"),null!=expand&&expand,this.createAdvancedShapes())},Sidebar.prototype.createAdvancedShapes=function(){var sb=this,field=new mxCell("List Item",new mxGeometry(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return field.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",(function(){return sb.createVertexTemplateFromData("zZXRaoMwFIafJpcDjbNrb2233rRQ8AkyPdPQaCRJV+3T7yTG2rUVBoOtgpDzn/xJzncCIdGyateKNeVW5iBI9EqipZLS9KOqXYIQhAY8J9GKUBrgT+jbRDZ02aBhCmrzEwPtDZ9MHKBXdkpmoDWKCVN9VptO+Kw+8kqwGqMkK7nIN6yTB7uTNizbD1FSSsVPsjYMC1qFKHxwIZZSSIVxLZ1/nJNar5+oQPMT7IYCrqUta1ENzuqGaeOFTArBGs3f3Vmtoo2Se7ja1h00kSoHK4bBIKUNy3hdoPYU0mF91i9mT8EEL2ocZ3gKa00ayWujLZY4IfHKFonVDLsRGgXuQ90zBmWgneyTk3yT1iArMKrDKUeem9L3ajHrbSXwohxsQd/ggOleKM7ese048J2/fwuim1uQGmhQCW8vQMkacP3GCQgBFMftHEsr7cYYe95CnmKTPMFbYD8CQ++DGQy+/M5X4ku5wHYmdIktfvk9tecpavThqS3m/0YtnqIWPTy1cD77K2wYjo+Ay317I74A",296,100,"Process Bar")})),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",(function(){var cell=new mxCell("List",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return cell.vertex=!0,cell.insert(sb.cloneCell(field,"Item 1")),cell.insert(sb.cloneCell(field,"Item 2")),cell.insert(sb.cloneCell(field,"Item 3")),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"List")})),this.addEntry("list item entry value group erd table",(function(){return sb.createVertexTemplateFromCells([sb.cloneCell(field,"List Item")],field.geometry.width,field.geometry.height,"List Item")}))]},Sidebar.prototype.addUmlPalette=function(expand){var sb=this,field=new mxCell("+ field: type",new mxGeometry(0,0,100,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");field.vertex=!0;var divider=new mxCell("",new mxGeometry(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");divider.vertex=!0;var dt="uml static class ",fns=[this.createVertexTemplateEntry("html=1;",110,50,"Object","Object",null,null,dt+"object instance"),this.createVertexTemplateEntry("html=1;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,dt+"interface object instance annotated annotation"),this.addEntry(dt+"object instance",(function(){var cell=new mxCell("Classname",new mxGeometry(0,0,160,90),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return cell.vertex=!0,cell.insert(field.clone()),cell.insert(divider.clone()),cell.insert(sb.cloneCell(field,"+ method(type): type")),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Class")})),this.addEntry(dt+"section subsection",(function(){var cell=new mxCell("Classname",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return cell.vertex=!0,cell.insert(field.clone()),cell.insert(field.clone()),cell.insert(field.clone()),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Class 2")})),this.addEntry(dt+"item member method function variable field attribute label",(function(){return sb.createVertexTemplateFromCells([sb.cloneCell(field,"+ item: attribute")],field.geometry.width,field.geometry.height,"Item 1")})),this.addEntry(dt+"item member method function variable field attribute label",(function(){var cell=new mxCell("item: attribute",new mxGeometry(0,0,120,field.geometry.height),"label;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;image="+sb.gearImage);return cell.vertex=!0,sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Item 2")})),this.addEntry(dt+"divider hline line separator",(function(){return sb.createVertexTemplateFromCells([divider.clone()],divider.geometry.width,divider.geometry.height,"Divider")})),this.addEntry(dt+"spacer space gap separator",(function(){var cell=new mxCell("",new mxGeometry(0,0,20,14),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");return cell.vertex=!0,sb.createVertexTemplateFromCells([cell.clone()],cell.geometry.width,cell.geometry.height,"Spacer")})),this.createVertexTemplateEntry("text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",80,26,"Title","Title",null,null,dt+"title label"),this.addEntry(dt+"component",(function(){var cell=new mxCell("&laquo;Annotation&raquo;<br/><b>Component</b>",new mxGeometry(0,0,180,90),"html=1;");cell.vertex=!0;var symbol=new mxCell("",new mxGeometry(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");return symbol.vertex=!0,symbol.geometry.relative=!0,symbol.geometry.offset=new mxPoint(-27,7),cell.insert(symbol),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Component")})),this.addEntry(dt+"component",(function(){var cell=new mxCell('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p><hr/><p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new mxGeometry(0,0,180,90),"align=left;overflow=fill;html=1;");cell.vertex=!0;var symbol=new mxCell("",new mxGeometry(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");return symbol.vertex=!0,symbol.geometry.relative=!0,symbol.geometry.offset=new mxPoint(-24,4),cell.insert(symbol),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Component with Attributes")})),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;",180,120,"Block","Block",null,null,dt+"block"),this.createVertexTemplateEntry("shape=component;align=left;spacingLeft=36;",120,60,"Module","Module",null,null,dt+"module"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;",70,50,"package","Package",null,null,dt+"package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p><hr/><p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,dt+"object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry(dt+"object instance",(function(){var cell=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return cell.vertex=!0,sb.createVertexTemplateFromCells([cell.clone()],cell.geometry.width,cell.geometry.height,"Class 3")})),this.addEntry(dt+"object instance",(function(){var cell=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return cell.vertex=!0,sb.createVertexTemplateFromCells([cell.clone()],cell.geometry.width,cell.geometry.height,"Class 4")})),this.addEntry(dt+"object instance",(function(){var cell=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new mxGeometry(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return cell.vertex=!0,sb.createVertexTemplateFromCells([cell.clone()],cell.geometry.width,cell.geometry.height,"Class 5")})),this.addEntry(dt+"object instance",(function(){var cell=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new mxGeometry(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return cell.vertex=!0,sb.createVertexTemplateFromCells([cell.clone()],cell.geometry.width,cell.geometry.height,"Interface 2")})),this.createVertexTemplateEntry("shape=providedRequiredInterface;html=1;verticalLabelPosition=bottom;",20,20,"","Provided/Required Interface",null,null,"uml provided required interface lollipop notation"),this.createVertexTemplateEntry("shape=requiredInterface;html=1;verticalLabelPosition=bottom;",10,20,"","Required Interface",null,null,"uml required interface lollipop notation"),this.addEntry("uml lollipop notation provided required interface",(function(){return sb.createVertexTemplateFromData("zVTBrptADPyavVYEkt4b0uQd3pMq5dD2uAUD27dgZJwE8vX1spsQlETtpVWRIjFjex3PmFVJWvc70m31hjlYlXxWSUqI7N/qPgVrVRyZXCUbFceR/FS8fRJdjNGo1QQN/0lB7AuO2h7AM57oeLCBIDw0Obj8SCVrJK6wxEbbV8RWyIWQP4F52Juzq9AHRqEqrm2IQpN/IsKTwAYb8MzWWBuO9B0hL2E2BGsqIQyxvJ9rzApD7QBrYBokhcBqNsf5UbrzsLzmXUu/oJET42jwGat5QYcHyiDkTDLKy03TiRrFfSx08m+FrrQtUkOZvZdbFKThmwMfVhf4fQ43/W3uZriiPPT+KKhjwnf4anKuQv//wsg+NPJ7/9d9Xf7eVykwbeeMOFWGYd/qzEVO8tHP/Suw4a2ujXV/+gXsEdhkOgSC8os44BQt0tggicZHeG1N2QiXibhAV48epRayEDd8MT7Ct06TUaXVWq027tCuhcx5VZjebeeaoDNn/WMcb/p+j0AM/dNr6InLl4Lgzylsk6OCgRWYsuI592gNZh5OhgmcblPv7+1l+ws=",40,10,"Lollipop Notation")})),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;",30,60,"Actor","Actor",!1,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",(function(){var cell=new mxCell("",new mxGeometry(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;");cell.vertex=!0;var edge=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return edge.geometry.setTerminalPoint(new mxPoint(15,90),!1),edge.geometry.relative=!0,edge.edge=!0,cell.insertEdge(edge,!0),sb.createVertexTemplateFromCells([cell,edge],30,90,"Start")})),this.addEntry("uml activity state",(function(){var cell=new mxCell("Activity",new mxGeometry(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;");cell.vertex=!0;var edge=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return edge.geometry.setTerminalPoint(new mxPoint(60,100),!1),edge.geometry.relative=!0,edge.edge=!0,cell.insertEdge(edge,!0),sb.createVertexTemplateFromCells([cell,edge],120,100,"Activity")})),this.addEntry("uml activity composite state",(function(){var cell=new mxCell("Composite State",new mxGeometry(0,0,160,60),"swimlane;html=1;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;fontColor=#000000;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;");cell.vertex=!0;var cell1=new mxCell("Subtitle",new mxGeometry(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;fontColor=#000000;");cell1.vertex=!0,cell.insert(cell1);var edge=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return edge.geometry.setTerminalPoint(new mxPoint(80,120),!1),edge.geometry.relative=!0,edge.edge=!0,cell.insertEdge(edge,!0),sb.createVertexTemplateFromCells([cell,edge],160,120,"Composite State")})),this.addEntry("uml activity condition",(function(){var cell=new mxCell("Condition",new mxGeometry(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;");cell.vertex=!0;var edge1=new mxCell("no",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");edge1.geometry.setTerminalPoint(new mxPoint(180,20),!1),edge1.geometry.relative=!0,edge1.geometry.x=-1,edge1.edge=!0,cell.insertEdge(edge1,!0);var edge2=new mxCell("yes",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;");return edge2.geometry.setTerminalPoint(new mxPoint(40,100),!1),edge2.geometry.relative=!0,edge2.geometry.x=-1,edge2.edge=!0,cell.insertEdge(edge2,!0),sb.createVertexTemplateFromCells([cell,edge1,edge2],180,100,"Condition")})),this.addEntry("uml activity fork join",(function(){var cell=new mxCell("",new mxGeometry(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;");cell.vertex=!0;var edge=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return edge.geometry.setTerminalPoint(new mxPoint(100,80),!1),edge.geometry.relative=!0,edge.edge=!0,cell.insertEdge(edge,!0),sb.createVertexTemplateFromCells([cell,edge],200,80,"Fork/Join")})),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry("shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;",100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlBoundary;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlEntity;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlControl;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;labelBackgroundColor=#ffffff;outlineConnect=0;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;",100,70,"Note","Note",null,null,"uml note"),this.addEntry("uml sequence invoke invocation call activation",(function(){var cell=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");cell.vertex=!0;var edge=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;");return edge.geometry.setTerminalPoint(new mxPoint(-60,0),!0),edge.geometry.relative=!0,edge.edge=!0,cell.insertEdge(edge,!1),sb.createVertexTemplateFromCells([cell,edge],10,80,"Found Message")})),this.addEntry("uml sequence invoke call delegation synchronous invocation activation",(function(){var cell=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");cell.vertex=!0;var edge1=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;");edge1.geometry.setTerminalPoint(new mxPoint(-70,0),!0),edge1.geometry.relative=!0,edge1.edge=!0,cell.insertEdge(edge1,!1);var edge2=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;");return edge2.geometry.setTerminalPoint(new mxPoint(-70,76),!1),edge2.geometry.relative=!0,edge2.edge=!0,cell.insertEdge(edge2,!0),sb.createVertexTemplateFromCells([cell,edge1,edge2],10,80,"Synchronous Invocation")})),this.addEntry("uml sequence self call recursion delegation activation",(function(){var cell=new mxCell("",new mxGeometry(0,20,10,40),"html=1;points=[];perimeter=orthogonalPerimeter;");cell.vertex=!0;var edge=new mxCell("self call",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;");return edge.geometry.setTerminalPoint(new mxPoint(5,0),!0),edge.geometry.points=[new mxPoint(30,0)],edge.geometry.relative=!0,edge.edge=!0,cell.insertEdge(edge,!1),sb.createVertexTemplateFromCells([cell,edge],10,60,"Self Call")})),this.addEntry("uml sequence invoke call delegation callback activation",(function(){return sb.createVertexTemplateFromData("xZRNT8MwDIZ/Ta6oaymD47rBTkiTuMAxW6wmIm0q19s6fj1OE3V0Y2iCA4dK8euP2I+riGxedUuUjX52CqzIHkU2R+conKpuDtaKNDFKZAuRpgl/In264J303qSRCDVdk5CGhJ20WwhKEFo62ChoqritxURkReNMTa2X80LkC68AmgoIkEWHpF3pamlXR7WIFwASdBeb7KXY4RIc5+KBQ/ZGkY4RYY5Egyl1zLqLmmyDXQ6Zx4n5EIf+HkB2BmAjrV3LzftPIPw4hgNn1pQ1a2tH5Cp2QK1miG7vNeu4iJe4pdeY2BtvbCQDGlAljMCQxBJotJ8rWCFYSWY3LvUdmZi68rvkkLiU6QnL1m1xAzHoBOdw61WEb88II9AW67/ydQ2wq1Cy1aAGvOrFfPh6997qDA3g+dxzv3nIL6MPU/8T+kMw8+m4QPgdfrEJNo8PSQj/+s58Ag==",10,60,"Callback")})),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;",10,80,"","Activation",null,null,"uml sequence activation"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",(function(){var edge=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;");return edge.geometry.setTerminalPoint(new mxPoint(80,0),!0),edge.geometry.setTerminalPoint(new mxPoint(0,0),!1),edge.geometry.relative=!0,edge.edge=!0,sb.createEdgeTemplateFromCells([edge],80,0,"Return")})),this.addEntry("uml relation",(function(){var edge=new mxCell("name",new mxGeometry(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;");edge.geometry.setTerminalPoint(new mxPoint(0,0),!0),edge.geometry.setTerminalPoint(new mxPoint(160,0),!1),edge.geometry.relative=!0,edge.geometry.x=-1,edge.edge=!0;var cell=new mxCell("1",new mxGeometry(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;");return cell.geometry.relative=!0,cell.setConnectable(!1),cell.vertex=!0,edge.insert(cell),sb.createEdgeTemplateFromCells([edge],160,0,"Relation 1")})),this.addEntry("uml association",(function(){var edge=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;");edge.geometry.setTerminalPoint(new mxPoint(0,0),!0),edge.geometry.setTerminalPoint(new mxPoint(160,0),!1),edge.geometry.relative=!0,edge.edge=!0;var cell1=new mxCell("parent",new mxGeometry(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;");cell1.geometry.relative=!0,cell1.setConnectable(!1),cell1.vertex=!0,edge.insert(cell1);var cell2=new mxCell("child",new mxGeometry(1,0,0,0),"resizable=0;html=1;align=right;verticalAlign=bottom;labelBackgroundColor=#ffffff;fontSize=10;");return cell2.geometry.relative=!0,cell2.setConnectable(!1),cell2.vertex=!0,edge.insert(cell2),sb.createEdgeTemplateFromCells([edge],160,0,"Association 1")})),this.addEntry("uml aggregation",(function(){var edge=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return edge.geometry.setTerminalPoint(new mxPoint(0,0),!0),edge.geometry.setTerminalPoint(new mxPoint(160,0),!1),edge.geometry.relative=!0,edge.geometry.x=-1,edge.geometry.y=3,edge.edge=!0,sb.createEdgeTemplateFromCells([edge],160,0,"Aggregation 1")})),this.addEntry("uml composition",(function(){var edge=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return edge.geometry.setTerminalPoint(new mxPoint(0,0),!0),edge.geometry.setTerminalPoint(new mxPoint(160,0),!1),edge.geometry.relative=!0,edge.geometry.x=-1,edge.geometry.y=3,edge.edge=!0,sb.createEdgeTemplateFromCells([edge],160,0,"Composition 1")})),this.addEntry("uml relation",(function(){var edge=new mxCell("Relation",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;");edge.geometry.setTerminalPoint(new mxPoint(0,0),!0),edge.geometry.setTerminalPoint(new mxPoint(160,0),!1),edge.geometry.relative=!0,edge.edge=!0;var cell1=new mxCell("0..n",new mxGeometry(-1,0,0,0),"resizable=0;html=1;align=left;verticalAlign=top;labelBackgroundColor=#ffffff;fontSize=10;");cell1.geometry.relative=!0,cell1.setConnectable(!1),cell1.vertex=!0,edge.insert(cell1);var cell2=new mxCell("1",new mxGeometry(1,0,0,0),"resizable=0;html=1;align=right;verticalAlign=top;labelBackgroundColor=#ffffff;fontSize=10;");return cell2.geometry.relative=!0,cell2.setConnectable(!1),cell2.vertex=!0,edge.insert(cell2),sb.createEdgeTemplateFromCells([edge],160,0,"Relation 2")})),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"uml inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"uml terminate"),this.createEdgeTemplateEntry("endArrow=block;dashed=1;endFill=0;endSize=12;html=1;",160,0,"","Implementation",null,"uml realization implementation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=0;endSize=24;html=1;",160,0,"","Aggregation 2",null,"uml aggregation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=1;endSize=24;html=1;",160,0,"","Composition 2",null,"uml composition"),this.createEdgeTemplateEntry("endArrow=open;endFill=1;endSize=12;html=1;",160,0,"","Association 3",null,"uml association")];this.addPaletteFunctions("uml",mxResources.get("uml"),expand||!1,fns)},Sidebar.prototype.addBpmnPalette=function(dir,expand){var sb=this,fns=[this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;",120,80,"Task","Process",null,null,"bpmn task process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;",120,80,"Transaction","Transaction",null,null,"bpmn transaction"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;dashed=1;dashPattern=1 4;",120,80,"Event\nSub-Process","Event Sub-Process",null,null,"bpmn event subprocess sub process sub-process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;strokeWidth=3;",120,80,"Call Activity","Call Activity",null,null,"bpmn call activity"),this.addEntry("bpmn subprocess sub process sub-process",(function(){var cell=new mxCell("Sub-Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");cell.vertex=!0;var cell1=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;");return cell1.vertex=!0,cell1.geometry.relative=!0,cell1.geometry.offset=new mxPoint(-7,-14),cell.insert(cell1),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Sub-Process")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","loop","subprocess sub process sub-process looped").join(" "),(function(){var cell=new mxCell("Looped\nSub-Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1");cell.vertex=!0;var cell1=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=mxgraph.bpmn.loop;outlineConnect=0;");cell1.vertex=!0,cell1.geometry.relative=!0,cell1.geometry.offset=new mxPoint(-15,-14),cell.insert(cell1);var cell2=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;");return cell2.vertex=!0,cell2.geometry.relative=!0,cell2.geometry.offset=new mxPoint(1,-14),cell.insert(cell2),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Looped Sub-Process")})),this.addEntry("bpmn receive task",(function(){var cell=new mxCell("Receive",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");cell.vertex=!0;var cell1=new mxCell("",new mxGeometry(0,0,20,14),"html=1;shape=message;outlineConnect=0;");return cell1.vertex=!0,cell1.geometry.relative=!0,cell1.geometry.offset=new mxPoint(7,7),cell.insert(cell1),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Receive Task")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","user_task").join(" "),(function(){var cell=new mxCell("User",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");cell.vertex=!0;var cell1=new mxCell("",new mxGeometry(0,0,14,14),"html=1;shape=mxgraph.bpmn.user_task;outlineConnect=0;");cell1.vertex=!0,cell1.geometry.relative=!0,cell1.geometry.offset=new mxPoint(7,7),cell.insert(cell1);var cell2=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;");return cell2.vertex=!0,cell2.geometry.relative=!0,cell2.geometry.offset=new mxPoint(-7,-14),cell.insert(cell2),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"User Task")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),(function(){var cell=new mxCell("Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");cell.vertex=!0;var cell1=new mxCell("",new mxGeometry(1,1,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;outlineConnect=0;");return cell1.vertex=!0,cell1.geometry.relative=!0,cell1.geometry.offset=new mxPoint(-40,-15),cell.insert(cell1),sb.createVertexTemplateFromCells([cell],120,95,"Attached Timer Event 1")})),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),(function(){var cell=new mxCell("Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;");cell.vertex=!0;var cell1=new mxCell("",new mxGeometry(1,0,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;labelPosition=right;labelBackgroundColor=#ffffff;align=left;outlineConnect=0;");return cell1.vertex=!0,cell1.geometry.relative=!0,cell1.geometry.offset=new mxPoint(-15,10),cell.insert(cell1),sb.createVertexTemplateFromCells([cell],135,80,"Attached Timer Event 2")})),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;startSize=20;",320,240,"Pool","Pool",null,null,"bpmn pool"),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;swimlaneLine=0;",300,120,"Lane","Lane",null,null,"bpmn lane"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;rounded=0;",60,50,"","Conversation",null,null,"bpmn conversation"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;strokeWidth=4;rounded=0;",60,50,"","Call Conversation",null,null,"bpmn call conversation"),this.addEntry("bpmn subconversation sub conversation sub-conversation",(function(){var cell=new mxCell("",new mxGeometry(0,0,60,50),"shape=hexagon;whiteSpace=wrap;html=1;perimeter=hexagonPerimeter;rounded=0;");cell.vertex=!0;var cell1=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;");return cell1.vertex=!0,cell1.geometry.relative=!0,cell1.geometry.offset=new mxPoint(-7,-14),cell.insert(cell1),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Sub-Conversation")})),this.addEntry("bpmn data object",(function(){var cell=new mxCell("",new mxGeometry(0,0,40,60),"shape=note;whiteSpace=wrap;size=16;html=1;");cell.vertex=!0;var cell1=new mxCell("",new mxGeometry(0,0,14,14),"html=1;shape=singleArrow;arrowWidth=0.4;arrowSize=0.4;outlineConnect=0;");cell1.vertex=!0,cell1.geometry.relative=!0,cell1.geometry.offset=new mxPoint(2,2),cell.insert(cell1);var cell2=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;whiteSpace=wrap;shape=parallelMarker;outlineConnect=0;");return cell2.vertex=!0,cell2.geometry.relative=!0,cell2.geometry.offset=new mxPoint(-7,-14),cell.insert(cell2),sb.createVertexTemplateFromCells([cell],cell.geometry.width,cell.geometry.height,"Data Object")})),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"bpmn data store"),this.createVertexTemplateEntry("shape=plus;html=1;outlineConnect=0;",14,14,"","Sub-Process Marker",null,null,"bpmn subprocess sub process sub-process marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.loop;html=1;outlineConnect=0;",14,14,"","Loop Marker",null,null,"bpmn loop marker"),this.createVertexTemplateEntry("shape=parallelMarker;html=1;outlineConnect=0;",14,14,"","Parallel MI Marker",null,null,"bpmn parallel mi marker"),this.createVertexTemplateEntry("shape=parallelMarker;direction=south;html=1;outlineConnect=0;",14,14,"","Sequential MI Marker",null,null,"bpmn sequential mi marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.ad_hoc;fillColor=#000000;html=1;outlineConnect=0;",14,14,"","Ad Hoc Marker",null,null,"bpmn ad hoc marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.compensation;html=1;outlineConnect=0;",14,14,"","Compensation Marker",null,null,"bpmn compensation marker"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;fillColor=#000000;strokeColor=#ffffff;strokeWidth=2;",40,30,"","Send Task",null,null,"bpmn send task"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;",40,30,"","Receive Task",null,null,"bpmn receive task"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.user_task;html=1;outlineConnect=0;",14,14,"","User Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.manual_task;html=1;outlineConnect=0;",14,14,"","Manual Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.business_rule_task;html=1;outlineConnect=0;",14,14,"","Business Rule Task",null,null,this.getTagsForStencil("mxgraph.bpmn","business_rule_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.service_task;html=1;outlineConnect=0;",14,14,"","Service Task",null,null,this.getTagsForStencil("mxgraph.bpmn","service_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.script_task;html=1;outlineConnect=0;",14,14,"","Script Task",null,null,this.getTagsForStencil("mxgraph.bpmn","script_task").join(" ")),this.createVertexTemplateEntry("html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;",50,100,"","Annotation",null,null,this.getTagsForStencil("bpmn","annotation_1","bpmn business process model ").join(" ")),this.createVertexTemplateEntry("rounded=1;arcSize=10;dashed=1;strokeColor=#000000;fillColor=none;gradientColor=none;dashPattern=8 3 1 3;strokeWidth=2;",200,200,"","Group",null,null,this.getTagsForStencil("bpmn","group","bpmn business process model ").join(" ")),this.createEdgeTemplateEntry("endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Sequence Flow",null,"bpmn sequence flow"),this.createEdgeTemplateEntry("startArrow=dash;startSize=8;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Default Flow",null,"bpmn default flow"),this.createEdgeTemplateEntry("startArrow=diamondThin;startFill=0;startSize=14;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Conditional Flow",null,"bpmn conditional flow"),this.createEdgeTemplateEntry("startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;",100,0,"","Message Flow 1",null,"bpmn message flow"),this.addEntry("bpmn message flow",(function(){var edge=new mxCell("",new mxGeometry(0,0,0,0),"startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;");edge.geometry.setTerminalPoint(new mxPoint(0,0),!0),edge.geometry.setTerminalPoint(new mxPoint(100,0),!1),edge.geometry.relative=!0,edge.edge=!0;var cell=new mxCell("",new mxGeometry(0,0,20,14),"shape=message;html=1;outlineConnect=0;");return cell.geometry.relative=!0,cell.vertex=!0,cell.geometry.offset=new mxPoint(-10,-7),edge.insert(cell),sb.createEdgeTemplateFromCells([edge],100,0,"Message Flow 2")})),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,"bpmn link")];this.addPaletteFunctions("bpmn","BPMN "+mxResources.get("general"),!1,fns)},Sidebar.prototype.createTitle=function(label){var elt=document.createElement("a");return elt.setAttribute("title",mxResources.get("sidebarTooltip")),elt.className="geTitle",mxUtils.write(elt,label),elt},Sidebar.prototype.createThumb=function(cells,width,height,parent,title,showLabel,showTitle,realWidth,realHeight){this.graph.labelsVisible=null==showLabel||showLabel;var fo=mxClient.NO_FO;mxClient.NO_FO=Editor.prototype.originalNoForeignObject,this.graph.view.scaleAndTranslate(1,0,0),this.graph.addCells(cells);var bounds=this.graph.getGraphBounds(),s=Math.floor(100*Math.min((width-2*this.thumbBorder)/bounds.width,(height-2*this.thumbBorder)/bounds.height))/100;this.graph.view.scaleAndTranslate(s,Math.floor((width-bounds.width*s)/2/s-bounds.x),Math.floor((height-bounds.height*s)/2/s-bounds.y));var node=null;if(this.graph.dialect!=mxConstants.DIALECT_SVG||mxClient.NO_FO||null==this.graph.view.getCanvas().ownerSVGElement?((node=this.graph.container.cloneNode(!1)).innerHTML=this.graph.container.innerHTML,(mxClient.IS_QUIRKS||8==document.documentMode)&&(node.firstChild.style.overflow="visible")):node=this.graph.view.getCanvas().ownerSVGElement.cloneNode(!0),this.graph.getModel().clear(),mxClient.NO_FO=fo,mxClient.IS_IE6&&(parent.style.backgroundImage="url("+this.editorUi.editor.transparentImage+")"),node.style.position="relative",node.style.overflow="hidden",node.style.left=this.thumbBorder+"px",node.style.top=this.thumbBorder+"px",node.style.width=width+"px",node.style.height=height+"px",node.style.visibility="",node.style.minWidth="",node.style.minHeight="",parent.appendChild(node),this.sidebarTitles&&null!=title&&0!=showTitle){var border=mxClient.IS_QUIRKS?2*this.thumbPadding+2:0;parent.style.height=this.thumbHeight+border+this.sidebarTitleSize+8+"px";var div=document.createElement("div");div.style.fontSize=this.sidebarTitleSize+"px",div.style.color="#303030",div.style.textAlign="center",div.style.whiteSpace="nowrap",mxClient.IS_IE&&(div.style.height=this.sidebarTitleSize+12+"px"),div.style.paddingTop="4px",mxUtils.write(div,title),parent.appendChild(div)}return bounds},Sidebar.prototype.createItem=function(cells,title,showLabel,showTitle,width,height,allowCellsInserted){var elt=document.createElement("a");elt.className="geItem",elt.style.overflow="hidden";var border=mxClient.IS_QUIRKS?8+2*this.thumbPadding:2*this.thumbBorder;elt.style.width=this.thumbWidth+border+"px",elt.style.height=this.thumbHeight+border+"px",elt.style.padding=this.thumbPadding+"px",mxClient.IS_IE6&&(elt.style.border="none"),mxEvent.addListener(elt,"click",(function(evt){mxEvent.consume(evt)})),this.createThumb(cells,this.thumbWidth,this.thumbHeight,elt,title,showLabel,showTitle,width,height);var bounds=new mxRectangle(0,0,width,height);if(cells.length>1||cells[0].vertex){var ds=this.createDragSource(elt,this.createDropHandler(cells,!0,allowCellsInserted,bounds),this.createDragPreview(width,height),cells,bounds);this.addClickHandler(elt,ds,cells),ds.isGuidesEnabled=mxUtils.bind(this,(function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled}))}else if(null!=cells[0]&&cells[0].edge){var ds=this.createDragSource(elt,this.createDropHandler(cells,!1,allowCellsInserted,bounds),this.createDragPreview(width,height),cells,bounds);this.addClickHandler(elt,ds,cells)}return mxClient.IS_IOS||mxEvent.addGestureListeners(elt,null,mxUtils.bind(this,(function(evt){mxEvent.isMouseEvent(evt)&&this.showTooltip(elt,cells,bounds.width,bounds.height,title,showLabel)}))),elt},Sidebar.prototype.updateShapes=function(source,targets){var graph=this.editorUi.editor.graph,sourceCellStyle=graph.getCellStyle(source),result=[];graph.model.beginUpdate();try{for(var cellStyle=graph.getModel().getStyle(source),styles=["shadow","dashed","dashPattern","fontFamily","fontSize","fontColor","align","startFill","startSize","endFill","endSize","strokeColor","strokeWidth","fillColor","gradientColor","html","part","noEdgeStyle","edgeStyle","elbow","childLayout","recursiveResize","container","collapsible","connectable"],i=0;i<targets.length;i++){var targetCell=targets[i];if(graph.getModel().isVertex(targetCell)==graph.getModel().isVertex(source)||graph.getModel().isEdge(targetCell)==graph.getModel().isEdge(source)){var state=graph.view.getState(targetCell),style=null!=state?state.style:graph.getCellStyle(targets[i]);if(graph.getModel().setStyle(targetCell,cellStyle),null!=state&&"1"==mxUtils.getValue(state.style,"composite","0"))for(var childCount,j=graph.model.getChildCount(targetCell);j>=0;j--)graph.model.remove(graph.model.getChildAt(targetCell,j));if(null!=style){"umlLifeline"==style[mxConstants.STYLE_SHAPE]&&"umlLifeline"!=sourceCellStyle[mxConstants.STYLE_SHAPE]&&(graph.setCellStyles(mxConstants.STYLE_SHAPE,"umlLifeline",[targetCell]),graph.setCellStyles("participant",sourceCellStyle[mxConstants.STYLE_SHAPE],[targetCell]));for(var j=0;j<styles.length;j++){var value=style[styles[j]];null!=value&&graph.setCellStyles(styles[j],value,[targetCell])}}result.push(targetCell)}}}finally{graph.model.endUpdate()}return result},Sidebar.prototype.createDropHandler=function(cells,allowSplit,allowCellsInserted,bounds){return allowCellsInserted=null==allowCellsInserted||allowCellsInserted,mxUtils.bind(this,(function(graph,evt,target,x,y,force){for(var elt=force?null:mxEvent.isTouchEvent(evt)||mxEvent.isPenEvent(evt)?document.elementFromPoint(mxEvent.getClientX(evt),mxEvent.getClientY(evt)):mxEvent.getSource(evt);null!=elt&&elt!=this.container;)elt=elt.parentNode;if(null==elt&&graph.isEnabled()){if((cells=graph.getImportableCells(cells)).length>0){graph.stopEditing();var validDropTarget=null!=target&&!mxEvent.isAltDown(evt)&&graph.isValidDropTarget(target,cells,evt),select=null;if(null==target||validDropTarget||(target=null),!graph.isCellLocked(target||graph.getDefaultParent())){graph.model.beginUpdate();try{if(x=Math.round(x),y=Math.round(y),allowSplit&&graph.isSplitTarget(target,cells,evt)){var clones=graph.cloneCells(cells);graph.splitEdge(target,clones,null,x-bounds.width/2,y-bounds.height/2),select=clones}else cells.length>0&&(select=graph.importCells(cells,x,y,target));if(null!=graph.layoutManager){var layout=graph.layoutManager.getLayout(target);if(null!=layout)for(var s=graph.view.scale,tr=graph.view.translate,tx=(x+tr.x)*s,ty=(y+tr.y)*s,i=0;i<select.length;i++)layout.moveCell(select[i],tx,ty)}!allowCellsInserted||null!=evt&&mxEvent.isShiftDown(evt)||graph.fireEvent(new mxEventObject("cellsInserted","cells",select))}catch(e){this.editorUi.handleError(e)}finally{graph.model.endUpdate()}null!=select&&select.length>0&&(graph.scrollCellToVisible(select[0]),graph.setSelectionCells(select)),graph.editAfterInsert&&null!=evt&&mxEvent.isMouseEvent(evt)&&null!=select&&1==select.length&&window.setTimeout((function(){graph.startEditing(select[0])}),0)}}mxEvent.consume(evt)}}))},Sidebar.prototype.createDragPreview=function(width,height){var elt=document.createElement("div");return elt.style.border=this.dragPreviewBorder,elt.style.width=width+"px",elt.style.height=height+"px",elt},Sidebar.prototype.dropAndConnect=function(source,targets,direction,dropCellIndex,evt){var geo=this.getDropAndConnectGeometry(source,targets[dropCellIndex],direction,targets),tmp=[];if(null!=geo){var graph=this.editorUi.editor.graph,editingCell=null;graph.model.beginUpdate();try{var sourceGeo=graph.getCellGeometry(source),geo2=graph.getCellGeometry(targets[dropCellIndex]),targetParent=graph.model.getParent(source),validLayout=!0;if(null!=graph.layoutManager){var layout=graph.layoutManager.getLayout(targetParent),tmp;if(null!=layout&&layout.constructor==mxStackLayout)if(validLayout=!1,null!=(tmp=graph.view.getState(targetParent))){var offset=new mxPoint(tmp.x/graph.view.scale-graph.view.translate.x,tmp.y/graph.view.scale-graph.view.translate.y);geo.x+=offset.x,geo.y+=offset.y;var pt=geo.getTerminalPoint(!1);null!=pt&&(pt.x+=offset.x,pt.y+=offset.y)}}var dx=geo2.x,dy=geo2.y;graph.model.isEdge(targets[dropCellIndex])&&(dx=0,dy=0);var useParent=graph.model.isEdge(source)||null!=sourceGeo&&!sourceGeo.relative&&validLayout;if(tmp=targets=graph.importCells(targets,geo.x-(useParent?dx:0),geo.y-(useParent?dy:0),useParent?targetParent:null),graph.model.isEdge(source))graph.model.setTerminal(source,targets[dropCellIndex],direction==mxConstants.DIRECTION_NORTH);else if(graph.model.isEdge(targets[dropCellIndex])){graph.model.setTerminal(targets[dropCellIndex],source,!0);var geo3=graph.getCellGeometry(targets[dropCellIndex]);if(geo3.points=null,null!=geo3.getTerminalPoint(!1))geo3.setTerminalPoint(geo.getTerminalPoint(!1),!1);else if(useParent&&graph.model.isVertex(targetParent)){var tmpState=graph.view.getState(targetParent),offset=tmpState.cell!=graph.view.currentRoot?new mxPoint(tmpState.x/graph.view.scale-graph.view.translate.x,tmpState.y/graph.view.scale-graph.view.translate.y):new mxPoint(0,0);graph.cellsMoved(targets,offset.x,offset.y,null,null,!0)}}else geo2=graph.getCellGeometry(targets[dropCellIndex]),dx=geo.x-Math.round(geo2.x),dy=geo.y-Math.round(geo2.y),geo.x=Math.round(geo2.x),geo.y=Math.round(geo2.y),graph.model.setGeometry(targets[dropCellIndex],geo),graph.cellsMoved(targets,dx,dy,null,null,!0),tmp=targets.slice(),editingCell=1==tmp.length?tmp[0]:null,targets.push(graph.insertEdge(null,null,"",source,targets[dropCellIndex],graph.createCurrentEdgeStyle()));null!=evt&&mxEvent.isShiftDown(evt)||graph.fireEvent(new mxEventObject("cellsInserted","cells",targets))}catch(e){this.editorUi.handleError(e)}finally{graph.model.endUpdate()}graph.editAfterInsert&&null!=evt&&mxEvent.isMouseEvent(evt)&&null!=editingCell&&window.setTimeout((function(){graph.startEditing(editingCell)}),0)}return tmp},Sidebar.prototype.getDropAndConnectGeometry=function(source,target,direction,targets){var graph=this.editorUi.editor.graph,view=graph.view,keepSize=targets.length>1,geo=graph.getCellGeometry(source),geo2=graph.getCellGeometry(target);if(null!=geo&&null!=geo2)if(geo2=geo2.clone(),graph.model.isEdge(source)){var state,pts=(state=graph.view.getState(source)).absolutePoints,p0=pts[0],pe=pts[pts.length-1];direction==mxConstants.DIRECTION_NORTH?(geo2.x=p0.x/view.scale-view.translate.x-geo2.width/2,geo2.y=p0.y/view.scale-view.translate.y-geo2.height/2):(geo2.x=pe.x/view.scale-view.translate.x-geo2.width/2,geo2.y=pe.y/view.scale-view.translate.y-geo2.height/2)}else{if(geo.relative){var state=graph.view.getState(source);(geo=geo.clone()).x=(state.x-view.translate.x)/view.scale,geo.y=(state.y-view.translate.y)/view.scale}var length=graph.defaultEdgeLength;if(graph.model.isEdge(target)&&null!=geo2.getTerminalPoint(!0)&&null!=geo2.getTerminalPoint(!1)){var p0=geo2.getTerminalPoint(!0),pe,dx=(pe=geo2.getTerminalPoint(!1)).x-p0.x,dy=pe.y-p0.y;length=Math.sqrt(dx*dx+dy*dy),geo2.x=geo.getCenterX(),geo2.y=geo.getCenterY(),geo2.width=1,geo2.height=1,direction==mxConstants.DIRECTION_NORTH?(geo2.height=length,geo2.y=geo.y-length,geo2.setTerminalPoint(new mxPoint(geo2.x,geo2.y),!1)):direction==mxConstants.DIRECTION_EAST?(geo2.width=length,geo2.x=geo.x+geo.width,geo2.setTerminalPoint(new mxPoint(geo2.x+geo2.width,geo2.y),!1)):direction==mxConstants.DIRECTION_SOUTH?(geo2.height=length,geo2.y=geo.y+geo.height,geo2.setTerminalPoint(new mxPoint(geo2.x,geo2.y+geo2.height),!1)):direction==mxConstants.DIRECTION_WEST&&(geo2.width=length,geo2.x=geo.x-length,geo2.setTerminalPoint(new mxPoint(geo2.x,geo2.y),!1))}else if(!keepSize&&geo2.width>45&&geo2.height>45&&geo.width>45&&geo.height>45&&(geo2.width=geo2.width*(geo.height/geo2.height),geo2.height=geo.height),geo2.x=geo.x+geo.width/2-geo2.width/2,geo2.y=geo.y+geo.height/2-geo2.height/2,direction==mxConstants.DIRECTION_NORTH?geo2.y=geo2.y-geo.height/2-geo2.height/2-length:direction==mxConstants.DIRECTION_EAST?geo2.x=geo2.x+geo.width/2+geo2.width/2+length:direction==mxConstants.DIRECTION_SOUTH?geo2.y=geo2.y+geo.height/2+geo2.height/2+length:direction==mxConstants.DIRECTION_WEST&&(geo2.x=geo2.x-geo.width/2-geo2.width/2-length),graph.model.isEdge(target)&&null!=geo2.getTerminalPoint(!0)&&null!=target.getTerminal(!1)){var targetGeo=graph.getCellGeometry(target.getTerminal(!1));null!=targetGeo&&(direction==mxConstants.DIRECTION_NORTH?(geo2.x-=targetGeo.getCenterX(),geo2.y-=targetGeo.getCenterY()+targetGeo.height/2):direction==mxConstants.DIRECTION_EAST?(geo2.x-=targetGeo.getCenterX()-targetGeo.width/2,geo2.y-=targetGeo.getCenterY()):direction==mxConstants.DIRECTION_SOUTH?(geo2.x-=targetGeo.getCenterX(),geo2.y-=targetGeo.getCenterY()-targetGeo.height/2):direction==mxConstants.DIRECTION_WEST&&(geo2.x-=targetGeo.getCenterX()+targetGeo.width/2,geo2.y-=targetGeo.getCenterY()))}}return geo2},Sidebar.prototype.createDragSource=function(elt,dropHandler,preview,cells,bounds){for(var ui=this.editorUi,graph=ui.editor.graph,freeSourceEdge=null,firstVertex=null,sidebar=this,i=0;i<cells.length&&(null==firstVertex&&this.editorUi.editor.graph.model.isVertex(cells[i])?firstVertex=i:null==freeSourceEdge&&this.editorUi.editor.graph.model.isEdge(cells[i])&&null==this.editorUi.editor.graph.model.getTerminal(cells[i],!0)&&(freeSourceEdge=i),null==firstVertex||null==freeSourceEdge);i++);var dragSource=mxUtils.makeDraggable(elt,this.editorUi.editor.graph,mxUtils.bind(this,(function(graph,evt,target,x,y){if(null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=cells&&null!=currentStyleTarget&&activeArrow==styleTarget){var tmp=graph.isCellSelected(currentStyleTarget.cell)?graph.getSelectionCells():[currentStyleTarget.cell],updatedCells=this.updateShapes(graph.model.isEdge(currentStyleTarget.cell)?cells[0]:cells[firstVertex],tmp);graph.setSelectionCells(updatedCells)}else if(null!=cells&&null!=activeArrow&&null!=currentTargetState&&activeArrow!=styleTarget){var index=graph.model.isEdge(currentTargetState.cell)||null==freeSourceEdge?firstVertex:freeSourceEdge;graph.setSelectionCells(this.dropAndConnect(currentTargetState.cell,cells,direction,index,evt))}else dropHandler.apply(this,arguments);null!=this.editorUi.hoverIcons&&this.editorUi.hoverIcons.update(graph.view.getState(graph.getSelectionCell()))})),preview,0,0,graph.autoscroll,!0,!0);graph.addListener(mxEvent.ESCAPE,(function(sender,evt){dragSource.isActive()&&dragSource.reset()}));var mouseDown=dragSource.mouseDown;function createArrow(img,tooltip){var arrow=null;return mxClient.IS_IE&&!mxClient.IS_SVG?(mxClient.IS_IE6&&"CSS1Compat"!=document.compatMode?((arrow=document.createElement(mxClient.VML_PREFIX+":image")).setAttribute("src",img.src),arrow.style.borderStyle="none"):((arrow=document.createElement("div")).style.backgroundImage="url("+img.src+")",arrow.style.backgroundPosition="center",arrow.style.backgroundRepeat="no-repeat"),arrow.style.width=img.width+4+"px",arrow.style.height=img.height+4+"px",arrow.style.display=mxClient.IS_QUIRKS?"inline":"inline-block"):((arrow=mxUtils.createImage(img.src)).style.width=img.width+"px",arrow.style.height=img.height+"px"),null!=tooltip&&arrow.setAttribute("title",tooltip),mxUtils.setOpacity(arrow,img==this.refreshTarget?30:20),arrow.style.position="absolute",arrow.style.cursor="crosshair",arrow}dragSource.mouseDown=function(evt){mxEvent.isPopupTrigger(evt)||mxEvent.isMultiTouchEvent(evt)||(graph.stopEditing(),mouseDown.apply(this,arguments))};var currentTargetState=null,currentStateHandle=null,currentStyleTarget=null,activeTarget=!1,arrowUp=createArrow(this.triangleUp,mxResources.get("connect")),arrowRight=createArrow(this.triangleRight,mxResources.get("connect")),arrowDown=createArrow(this.triangleDown,mxResources.get("connect")),arrowLeft=createArrow(this.triangleLeft,mxResources.get("connect")),styleTarget=createArrow(this.refreshTarget,mxResources.get("replace")),styleTargetParent=null,roundSource=createArrow(this.roundDrop),roundTarget=createArrow(this.roundDrop),direction=mxConstants.DIRECTION_NORTH,activeArrow=null;function checkArrow(x,y,bounds,arrow){return null!=arrow.parentNode&&(mxUtils.contains(bounds,x,y)?(mxUtils.setOpacity(arrow,100),activeArrow=arrow):mxUtils.setOpacity(arrow,arrow==styleTarget?30:20)),bounds}var dsCreatePreviewElement=dragSource.createPreviewElement;dragSource.createPreviewElement=function(graph){var elt=dsCreatePreviewElement.apply(this,arguments);return mxClient.IS_SVG&&(elt.style.pointerEvents="none"),this.previewElementWidth=elt.style.width,this.previewElementHeight=elt.style.height,elt};var dragEnter=dragSource.dragEnter;dragSource.dragEnter=function(graph,evt){null!=ui.hoverIcons&&ui.hoverIcons.setDisplay("none"),dragEnter.apply(this,arguments)};var dragExit=dragSource.dragExit;dragSource.dragExit=function(graph,evt){null!=ui.hoverIcons&&ui.hoverIcons.setDisplay(""),dragExit.apply(this,arguments)},dragSource.dragOver=function(graph,evt){if(mxDragSource.prototype.dragOver.apply(this,arguments),null!=this.currentGuide&&null!=activeArrow&&this.currentGuide.hide(),null!=this.previewElement){var view=graph.view;if(null!=currentStyleTarget&&activeArrow==styleTarget)this.previewElement.style.display=graph.model.isEdge(currentStyleTarget.cell)?"none":"",this.previewElement.style.left=currentStyleTarget.x+"px",this.previewElement.style.top=currentStyleTarget.y+"px",this.previewElement.style.width=currentStyleTarget.width+"px",this.previewElement.style.height=currentStyleTarget.height+"px";else if(null!=currentTargetState&&null!=activeArrow){var index=graph.model.isEdge(currentTargetState.cell)||null==freeSourceEdge?firstVertex:freeSourceEdge,geo=sidebar.getDropAndConnectGeometry(currentTargetState.cell,cells[index],direction,cells),geo2=graph.model.isEdge(currentTargetState.cell)?null:graph.getCellGeometry(currentTargetState.cell),geo3=graph.getCellGeometry(cells[index]),parent=graph.model.getParent(currentTargetState.cell),dx=view.translate.x*view.scale,dy=view.translate.y*view.scale;if(null!=geo2&&!geo2.relative&&graph.model.isVertex(parent)&&parent!=view.currentRoot){var pState=view.getState(parent);dx=pState.x,dy=pState.y}var dx2=geo3.x,dy2=geo3.y;graph.model.isEdge(cells[index])&&(dx2=0,dy2=0),this.previewElement.style.left=(geo.x-dx2)*view.scale+dx+"px",this.previewElement.style.top=(geo.y-dy2)*view.scale+dy+"px",1==cells.length&&(this.previewElement.style.width=geo.width*view.scale+"px",this.previewElement.style.height=geo.height*view.scale+"px"),this.previewElement.style.display=""}else null!=dragSource.currentHighlight.state&&graph.model.isEdge(dragSource.currentHighlight.state.cell)?(this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-bounds.width*view.scale/2)+"px",this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-bounds.height*view.scale/2)+"px"):(this.previewElement.style.width=this.previewElementWidth,this.previewElement.style.height=this.previewElementHeight,this.previewElement.style.display="")}};var startTime=(new Date).getTime(),timeOnTarget=0,prev=null,sourceCellStyle=this.editorUi.editor.graph.getCellStyle(cells[0]);return dragSource.getDropTarget=mxUtils.bind(this,(function(graph,x,y,evt){var cell=mxEvent.isAltDown(evt)||null==cells?null:graph.getCellAt(x,y);if(null!=cell&&!this.graph.isCellConnectable(cell)){var parent=this.graph.getModel().getParent(cell);this.graph.getModel().isVertex(parent)&&this.graph.isCellConnectable(parent)&&(cell=parent)}graph.isCellLocked(cell)&&(cell=null);var state=graph.view.getState(cell);activeArrow=null;var bbox=null;if(prev!=state?(prev=state,startTime=(new Date).getTime(),timeOnTarget=0,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=state&&(this.updateThread=window.setTimeout((function(){null==activeArrow&&(prev=state,dragSource.getDropTarget(graph,x,y,evt))}),this.dropTargetDelay+10))):timeOnTarget=(new Date).getTime()-startTime,timeOnTarget<2500&&null!=state&&!mxEvent.isShiftDown(evt)&&(mxUtils.getValue(state.style,mxConstants.STYLE_SHAPE)!=mxUtils.getValue(sourceCellStyle,mxConstants.STYLE_SHAPE)&&(mxUtils.getValue(state.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(state.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(state.style,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.NONE)!=mxConstants.NONE)||"image"==mxUtils.getValue(sourceCellStyle,mxConstants.STYLE_SHAPE)||timeOnTarget>1500||graph.model.isEdge(state.cell))&&timeOnTarget>this.dropTargetDelay&&(graph.model.isVertex(state.cell)&&null!=firstVertex||graph.model.isEdge(state.cell)&&graph.model.isEdge(cells[0]))){currentStyleTarget=state;var tmp=graph.model.isEdge(state.cell)?graph.view.getPoint(state):new mxPoint(state.getCenterX(),state.getCenterY());tmp=new mxRectangle(tmp.x-this.refreshTarget.width/2,tmp.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),styleTarget.style.left=Math.floor(tmp.x)+"px",styleTarget.style.top=Math.floor(tmp.y)+"px",null==styleTargetParent&&(graph.container.appendChild(styleTarget),styleTargetParent=styleTarget.parentNode),checkArrow(x,y,tmp,styleTarget)}else if(null==currentStyleTarget||!mxUtils.contains(currentStyleTarget,x,y)||timeOnTarget>1500&&!mxEvent.isShiftDown(evt))currentStyleTarget=null,null!=styleTargetParent&&(styleTarget.parentNode.removeChild(styleTarget),styleTargetParent=null);else if(null!=currentStyleTarget&&null!=styleTargetParent){var tmp=graph.model.isEdge(currentStyleTarget.cell)?graph.view.getPoint(currentStyleTarget):new mxPoint(currentStyleTarget.getCenterX(),currentStyleTarget.getCenterY());tmp=new mxRectangle(tmp.x-this.refreshTarget.width/2,tmp.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),checkArrow(x,y,tmp,styleTarget)}if(activeTarget&&null!=currentTargetState&&!mxEvent.isAltDown(evt)&&null==activeArrow){if(bbox=mxRectangle.fromRectangle(currentTargetState),graph.model.isEdge(currentTargetState.cell)){var pts=currentTargetState.absolutePoints;if(null!=roundSource.parentNode){var p0=pts[0];bbox.add(checkArrow(x,y,new mxRectangle(p0.x-this.roundDrop.width/2,p0.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),roundSource))}if(null!=roundTarget.parentNode){var pe=pts[pts.length-1];bbox.add(checkArrow(x,y,new mxRectangle(pe.x-this.roundDrop.width/2,pe.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),roundTarget))}}else{var bds=mxRectangle.fromRectangle(currentTargetState),handler;null!=currentTargetState.shape&&null!=currentTargetState.shape.boundingBox&&(bds=mxRectangle.fromRectangle(currentTargetState.shape.boundingBox)),bds.grow(this.graph.tolerance),bds.grow(HoverIcons.prototype.arrowSpacing),null!=(handler=this.graph.selectionCellsHandler.getHandler(currentTargetState.cell))&&(bds.x-=handler.horizontalOffset/2,bds.y-=handler.verticalOffset/2,bds.width+=handler.horizontalOffset,bds.height+=handler.verticalOffset,null!=handler.rotationShape&&null!=handler.rotationShape.node&&"hidden"!=handler.rotationShape.node.style.visibility&&"none"!=handler.rotationShape.node.style.display&&null!=handler.rotationShape.boundingBox&&bds.add(handler.rotationShape.boundingBox)),bbox.add(checkArrow(x,y,new mxRectangle(currentTargetState.getCenterX()-this.triangleUp.width/2,bds.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),arrowUp)),bbox.add(checkArrow(x,y,new mxRectangle(bds.x+bds.width,currentTargetState.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),arrowRight)),bbox.add(checkArrow(x,y,new mxRectangle(currentTargetState.getCenterX()-this.triangleDown.width/2,bds.y+bds.height,this.triangleDown.width,this.triangleDown.height),arrowDown)),bbox.add(checkArrow(x,y,new mxRectangle(bds.x-this.triangleLeft.width,currentTargetState.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),arrowLeft))}null!=bbox&&bbox.grow(10)}direction=mxConstants.DIRECTION_NORTH,activeArrow==arrowRight?direction=mxConstants.DIRECTION_EAST:activeArrow==arrowDown||activeArrow==roundTarget?direction=mxConstants.DIRECTION_SOUTH:activeArrow==arrowLeft&&(direction=mxConstants.DIRECTION_WEST),null!=currentStyleTarget&&activeArrow==styleTarget&&(state=currentStyleTarget);var validTarget=(null==firstVertex||graph.isCellConnectable(cells[firstVertex]))&&(graph.model.isEdge(cell)&&null!=firstVertex||graph.model.isVertex(cell)&&graph.isCellConnectable(cell));if(null!=currentTargetState&&timeOnTarget>=5e3||currentTargetState!=state&&(null==bbox||!mxUtils.contains(bbox,x,y)||timeOnTarget>500&&null==activeArrow&&validTarget))if(activeTarget=!1,null!=(currentTargetState=timeOnTarget<5e3&&timeOnTarget>this.dropTargetDelay||graph.model.isEdge(cell)?state:null)&&validTarget){for(var elts=[roundSource,roundTarget,arrowUp,arrowRight,arrowDown,arrowLeft],i=0;i<elts.length;i++)null!=elts[i].parentNode&&elts[i].parentNode.removeChild(elts[i]);if(graph.model.isEdge(cell)){var pts;if(null!=(pts=state.absolutePoints)){var p0=pts[0],pe=pts[pts.length-1],tol=graph.tolerance,box=new mxRectangle(x-tol,y-tol,2*tol,2*tol);roundSource.style.left=Math.floor(p0.x-this.roundDrop.width/2)+"px",roundSource.style.top=Math.floor(p0.y-this.roundDrop.height/2)+"px",roundTarget.style.left=Math.floor(pe.x-this.roundDrop.width/2)+"px",roundTarget.style.top=Math.floor(pe.y-this.roundDrop.height/2)+"px",null==graph.model.getTerminal(cell,!0)&&graph.container.appendChild(roundSource),null==graph.model.getTerminal(cell,!1)&&graph.container.appendChild(roundTarget)}}else{var bds=mxRectangle.fromRectangle(state),handler;null!=state.shape&&null!=state.shape.boundingBox&&(bds=mxRectangle.fromRectangle(state.shape.boundingBox)),bds.grow(this.graph.tolerance),bds.grow(HoverIcons.prototype.arrowSpacing),null!=(handler=this.graph.selectionCellsHandler.getHandler(state.cell))&&(bds.x-=handler.horizontalOffset/2,bds.y-=handler.verticalOffset/2,bds.width+=handler.horizontalOffset,bds.height+=handler.verticalOffset,null!=handler.rotationShape&&null!=handler.rotationShape.node&&"hidden"!=handler.rotationShape.node.style.visibility&&"none"!=handler.rotationShape.node.style.display&&null!=handler.rotationShape.boundingBox&&bds.add(handler.rotationShape.boundingBox)),arrowUp.style.left=Math.floor(state.getCenterX()-this.triangleUp.width/2)+"px",arrowUp.style.top=Math.floor(bds.y-this.triangleUp.height)+"px",arrowRight.style.left=Math.floor(bds.x+bds.width)+"px",arrowRight.style.top=Math.floor(state.getCenterY()-this.triangleRight.height/2)+"px",arrowDown.style.left=arrowUp.style.left,arrowDown.style.top=Math.floor(bds.y+bds.height)+"px",arrowLeft.style.left=Math.floor(bds.x-this.triangleLeft.width)+"px",arrowLeft.style.top=arrowRight.style.top,"eastwest"!=state.style.portConstraint&&(graph.container.appendChild(arrowUp),graph.container.appendChild(arrowDown)),graph.container.appendChild(arrowRight),graph.container.appendChild(arrowLeft)}null!=state&&null!=(currentStateHandle=graph.selectionCellsHandler.getHandler(state.cell))&&null!=currentStateHandle.setHandlesVisible&&currentStateHandle.setHandlesVisible(!1),activeTarget=!0}else for(var elts=[roundSource,roundTarget,arrowUp,arrowRight,arrowDown,arrowLeft],i=0;i<elts.length;i++)null!=elts[i].parentNode&&elts[i].parentNode.removeChild(elts[i]);activeTarget||null==currentStateHandle||currentStateHandle.setHandlesVisible(!0);var target=mxEvent.isAltDown(evt)&&!mxEvent.isShiftDown(evt)||null!=currentStyleTarget&&activeArrow==styleTarget?null:mxDragSource.prototype.getDropTarget.apply(this,arguments),model=graph.getModel();if(null!=target&&(null!=activeArrow||!graph.isSplitTarget(target,cells,evt))){for(;null!=target&&!graph.isValidDropTarget(target,cells,evt)&&model.isVertex(model.getParent(target));)target=model.getParent(target);(graph.view.currentRoot==target||!graph.isValidRoot(target)&&0==graph.getModel().getChildCount(target)||graph.isCellLocked(target)||model.isEdge(target))&&(target=null)}return target})),dragSource.stopDrag=function(){mxDragSource.prototype.stopDrag.apply(this,arguments);for(var elts=[roundSource,roundTarget,styleTarget,arrowUp,arrowRight,arrowDown,arrowLeft],i=0;i<elts.length;i++)null!=elts[i].parentNode&&elts[i].parentNode.removeChild(elts[i]);null!=currentTargetState&&null!=currentStateHandle&&currentStateHandle.reset(),currentStateHandle=null,currentTargetState=null,currentStyleTarget=null,styleTargetParent=null,activeArrow=null},dragSource},Sidebar.prototype.itemClicked=function(cells,ds,evt,elt){var graph=this.editorUi.editor.graph;if(graph.container.focus(),mxEvent.isAltDown(evt)&&1==graph.getSelectionCount()&&graph.model.isVertex(graph.getSelectionCell())){for(var firstVertex=null,i=0;i<cells.length&&null==firstVertex;i++)graph.model.isVertex(cells[i])&&(firstVertex=i);null!=firstVertex&&(graph.setSelectionCells(this.dropAndConnect(graph.getSelectionCell(),cells,mxEvent.isMetaDown(evt)||mxEvent.isControlDown(evt)?mxEvent.isShiftDown(evt)?mxConstants.DIRECTION_WEST:mxConstants.DIRECTION_NORTH:mxEvent.isShiftDown(evt)?mxConstants.DIRECTION_EAST:mxConstants.DIRECTION_SOUTH,firstVertex,evt)),graph.scrollCellToVisible(graph.getSelectionCell()))}else if(mxEvent.isShiftDown(evt)&&!graph.isSelectionEmpty())this.updateShapes(cells[0],graph.getSelectionCells()),graph.scrollCellToVisible(graph.getSelectionCell());else{var pt=graph.getFreeInsertPoint();if(mxEvent.isAltDown(evt)){var bounds=graph.getGraphBounds(),tr=graph.view.translate,s=graph.view.scale;pt.x=bounds.x/s-tr.x+bounds.width/s+graph.gridSize,pt.y=bounds.y/s-tr.y}ds.drop(graph,evt,null,pt.x,pt.y,!0),null!=this.editorUi.hoverIcons&&(mxEvent.isTouchEvent(evt)||mxEvent.isPenEvent(evt))&&this.editorUi.hoverIcons.update(graph.view.getState(graph.getSelectionCell()))}},Sidebar.prototype.addClickHandler=function(elt,ds,cells){var graph=this.editorUi.editor.graph,oldMouseDown=ds.mouseDown,oldMouseMove=ds.mouseMove,oldMouseUp=ds.mouseUp,tol=graph.tolerance,first=null,sb=this;ds.mouseDown=function(evt){oldMouseDown.apply(this,arguments),first=new mxPoint(mxEvent.getClientX(evt),mxEvent.getClientY(evt)),null!=this.dragElement&&(this.dragElement.style.display="none",mxUtils.setOpacity(elt,50))},ds.mouseMove=function(evt){null!=this.dragElement&&"none"==this.dragElement.style.display&&null!=first&&(Math.abs(first.x-mxEvent.getClientX(evt))>tol||Math.abs(first.y-mxEvent.getClientY(evt))>tol)&&(this.dragElement.style.display="",mxUtils.setOpacity(elt,100)),oldMouseMove.apply(this,arguments)},ds.mouseUp=function(evt){mxEvent.isPopupTrigger(evt)||null!=this.currentGraph||null==this.dragElement||"none"!=this.dragElement.style.display||sb.itemClicked(cells,ds,evt,elt),oldMouseUp.apply(ds,arguments),mxUtils.setOpacity(elt,100),first=null,sb.currentElt=elt}},Sidebar.prototype.createVertexTemplateEntry=function(style,width,height,value,title,showLabel,showTitle,tags){return tags=null!=tags&&tags.length>0?tags:title.toLowerCase(),this.addEntry(tags,mxUtils.bind(this,(function(){return this.createVertexTemplate(style,width,height,value,title,showLabel,showTitle)})))},Sidebar.prototype.createVertexTemplate=function(style,width,height,value,title,showLabel,showTitle,allowCellsInserted){var cells=[new mxCell(null!=value?value:"",new mxGeometry(0,0,width,height),style)];return cells[0].vertex=!0,this.createVertexTemplateFromCells(cells,width,height,title,showLabel,showTitle,allowCellsInserted)},Sidebar.prototype.createVertexTemplateFromData=function(data,width,height,title,showLabel,showTitle,allowCellsInserted){var doc=mxUtils.parseXml(Graph.decompress(data)),codec=new mxCodec(doc),model=new mxGraphModel;codec.decode(doc.documentElement,model);var cells=this.graph.cloneCells(model.root.getChildAt(0).children);return this.createVertexTemplateFromCells(cells,width,height,title,showLabel,showTitle,allowCellsInserted)},Sidebar.prototype.createVertexTemplateFromCells=function(cells,width,height,title,showLabel,showTitle,allowCellsInserted){return this.createItem(cells,title,showLabel,showTitle,width,height,allowCellsInserted)},Sidebar.prototype.createEdgeTemplateEntry=function(style,width,height,value,title,showLabel,tags,allowCellsInserted){return tags=null!=tags&&tags.length>0?tags:title.toLowerCase(),this.addEntry(tags,mxUtils.bind(this,(function(){return this.createEdgeTemplate(style,width,height,value,title,showLabel,allowCellsInserted)})))},Sidebar.prototype.createEdgeTemplate=function(style,width,height,value,title,showLabel,allowCellsInserted){var cell=new mxCell(null!=value?value:"",new mxGeometry(0,0,width,height),style);return cell.geometry.setTerminalPoint(new mxPoint(0,height),!0),cell.geometry.setTerminalPoint(new mxPoint(width,0),!1),cell.geometry.relative=!0,cell.edge=!0,this.createEdgeTemplateFromCells([cell],width,height,title,showLabel,allowCellsInserted)},Sidebar.prototype.createEdgeTemplateFromCells=function(cells,width,height,title,showLabel,allowCellsInserted){return this.createItem(cells,title,showLabel,!0,width,height,allowCellsInserted)},Sidebar.prototype.addPaletteFunctions=function(id,title,expanded,fns){this.addPalette(id,title,expanded,mxUtils.bind(this,(function(content){for(var i=0;i<fns.length;i++)content.appendChild(fns[i](content))})))},Sidebar.prototype.addPalette=function(id,title,expanded,onInit){var elt=this.createTitle(title);this.container.appendChild(elt);var div=document.createElement("div");div.className="geSidebar",mxClient.IS_POINTER&&(div.style.touchAction="none"),expanded?(onInit(div),onInit=null):div.style.display="none",this.addFoldingHandler(elt,div,onInit);var outer=document.createElement("div");return outer.appendChild(div),this.container.appendChild(outer),null!=id&&(this.palettes[id]=[elt,outer]),div},Sidebar.prototype.addFoldingHandler=function(title,content,funct){var initialized=!1;(!mxClient.IS_IE||document.documentMode>=8)&&(title.style.backgroundImage="none"==content.style.display?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"),title.style.backgroundRepeat="no-repeat",title.style.backgroundPosition="0% 50%",mxEvent.addListener(title,"click",mxUtils.bind(this,(function(evt){if("none"==content.style.display){if(initialized)content.style.display="block";else if(initialized=!0,null!=funct){title.style.cursor="wait";var prev=title.innerHTML;title.innerHTML=mxResources.get("loading")+"...",window.setTimeout((function(){content.style.display="block",title.style.cursor="",title.innerHTML=prev;var fo=mxClient.NO_FO;mxClient.NO_FO=Editor.prototype.originalNoForeignObject,funct(content,title),mxClient.NO_FO=fo}),mxClient.IS_FF?20:0)}else content.style.display="block";title.style.backgroundImage="url('"+this.expandedImage+"')"}else title.style.backgroundImage="url('"+this.collapsedImage+"')",content.style.display="none";mxEvent.consume(evt)}))),mxEvent.addListener(title,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,(function(evt){evt.preventDefault()})))},Sidebar.prototype.removePalette=function(id){var elts=this.palettes[id];if(null!=elts){this.palettes[id]=null;for(var i=0;i<elts.length;i++)this.container.removeChild(elts[i]);return!0}return!1},Sidebar.prototype.addImagePalette=function(id,title,prefix,postfix,items,titles,tags){for(var showTitles=null!=titles,fns=[],i=0;i<items.length;i++)mxUtils.bind(this,(function(item,title,tmpTags){if(null==tmpTags){var slash=item.lastIndexOf("/"),dot=item.lastIndexOf(".");tmpTags=item.substring(slash>=0?slash+1:0,dot>=0?dot:item.length).replace(/[-_]/g," ")}fns.push(this.createVertexTemplateEntry("image;html=1;labelBackgroundColor=#ffffff;image="+prefix+item+postfix,this.defaultImageWidth,this.defaultImageHeight,"",title,null!=title,null,this.filterTags(tmpTags)))}))(items[i],null!=titles?titles[i]:null,null!=tags?tags[items[i]]:null);this.addPaletteFunctions(id,title,!1,fns)},Sidebar.prototype.getTagsForStencil=function(packageName,stencilName,moreTags){for(var tags=packageName.split("."),i=1;i<tags.length;i++)tags[i]=tags[i].replace(/_/g," ");return tags.push(stencilName.replace(/_/g," ")),null!=moreTags&&tags.push(moreTags),tags.slice(1,tags.length)},Sidebar.prototype.addStencilPalette=function(id,title,stencilFile,style,ignore,onInit,scale,tags,customFns){if(scale=null!=scale?scale:1,this.addStencilsToIndex){var fns=[];if(null!=customFns)for(var i=0;i<customFns.length;i++)fns.push(customFns[i]);mxStencilRegistry.loadStencilSet(stencilFile,mxUtils.bind(this,(function(packageName,stencilName,displayName,w,h){if(null==ignore||mxUtils.indexOf(ignore,stencilName)<0){var tmp=this.getTagsForStencil(packageName,stencilName),tmpTags=null!=tags?tags[stencilName]:null;null!=tmpTags&&tmp.push(tmpTags),fns.push(this.createVertexTemplateEntry("shape="+packageName+stencilName.toLowerCase()+style,Math.round(w*scale),Math.round(h*scale),"",stencilName.replace(/_/g," "),null,null,this.filterTags(tmp.join(" "))))}})),!0,!0),this.addPaletteFunctions(id,title,!1,fns)}else this.addPalette(id,title,!1,mxUtils.bind(this,(function(content){if(null==style&&(style=""),null!=onInit&&onInit.call(this,content),null!=customFns)for(var i=0;i<customFns.length;i++)customFns[i](content);mxStencilRegistry.loadStencilSet(stencilFile,mxUtils.bind(this,(function(packageName,stencilName,displayName,w,h){(null==ignore||mxUtils.indexOf(ignore,stencilName)<0)&&content.appendChild(this.createVertexTemplate("shape="+packageName+stencilName.toLowerCase()+style,Math.round(w*scale),Math.round(h*scale),"",stencilName.replace(/_/g," "),!0))})),!0)})))},Sidebar.prototype.destroy=function(){null!=this.graph&&(null!=this.graph.container&&null!=this.graph.container.parentNode&&this.graph.container.parentNode.removeChild(this.graph.container),this.graph.destroy(),this.graph=null),null!=this.pointerUpHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerUpHandler=null),null!=this.pointerDownHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerDownHandler=null),null!=this.pointerMoveHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerMoveHandler=null),null!=this.pointerOutHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),this.pointerOutHandler=null)};